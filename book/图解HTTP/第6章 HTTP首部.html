<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>第6章 HTTP首部 | Karajan&#39;s Blog</title>
    <meta name="description" content="Karajan&#39;s Blog">
    <link rel="icon" href="https://github.githubassets.com/favicon.ico">
    
    <link rel="preload" href="/Blog/assets/css/0.styles.6da52ff5.css" as="style"><link rel="preload" href="/Blog/assets/js/app.948c224d.js" as="script"><link rel="preload" href="/Blog/assets/js/3.079b83dd.js" as="script"><link rel="preload" href="/Blog/assets/js/80.d3d625e1.js" as="script"><link rel="prefetch" href="/Blog/assets/js/10.3d6b0cd5.js"><link rel="prefetch" href="/Blog/assets/js/100.aed825bb.js"><link rel="prefetch" href="/Blog/assets/js/101.667e09b8.js"><link rel="prefetch" href="/Blog/assets/js/102.fbcf3c98.js"><link rel="prefetch" href="/Blog/assets/js/103.27ee6ddc.js"><link rel="prefetch" href="/Blog/assets/js/104.6082dbbd.js"><link rel="prefetch" href="/Blog/assets/js/105.85f7c82b.js"><link rel="prefetch" href="/Blog/assets/js/106.bd24f0a1.js"><link rel="prefetch" href="/Blog/assets/js/107.7ed79822.js"><link rel="prefetch" href="/Blog/assets/js/108.943cb8b0.js"><link rel="prefetch" href="/Blog/assets/js/109.54b03b44.js"><link rel="prefetch" href="/Blog/assets/js/11.f748cc5d.js"><link rel="prefetch" href="/Blog/assets/js/110.aa61cdc5.js"><link rel="prefetch" href="/Blog/assets/js/111.118ac3b2.js"><link rel="prefetch" href="/Blog/assets/js/112.8f8f4791.js"><link rel="prefetch" href="/Blog/assets/js/12.72a6e189.js"><link rel="prefetch" href="/Blog/assets/js/13.51e6d906.js"><link rel="prefetch" href="/Blog/assets/js/14.dd2020ff.js"><link rel="prefetch" href="/Blog/assets/js/15.1edd9643.js"><link rel="prefetch" href="/Blog/assets/js/16.d11b5fdc.js"><link rel="prefetch" href="/Blog/assets/js/17.7ce57992.js"><link rel="prefetch" href="/Blog/assets/js/18.85248e1e.js"><link rel="prefetch" href="/Blog/assets/js/19.e41cd270.js"><link rel="prefetch" href="/Blog/assets/js/2.dfae10df.js"><link rel="prefetch" href="/Blog/assets/js/20.f6a8c36e.js"><link rel="prefetch" href="/Blog/assets/js/21.864d0000.js"><link rel="prefetch" href="/Blog/assets/js/22.7f1c3ef7.js"><link rel="prefetch" href="/Blog/assets/js/23.1e9baa52.js"><link rel="prefetch" href="/Blog/assets/js/24.22024d44.js"><link rel="prefetch" href="/Blog/assets/js/25.5b83a272.js"><link rel="prefetch" href="/Blog/assets/js/26.b9ba3d59.js"><link rel="prefetch" href="/Blog/assets/js/27.c4bd10fc.js"><link rel="prefetch" href="/Blog/assets/js/28.0891a1e9.js"><link rel="prefetch" href="/Blog/assets/js/29.f496e8ee.js"><link rel="prefetch" href="/Blog/assets/js/30.d32c1458.js"><link rel="prefetch" href="/Blog/assets/js/31.b0d186c6.js"><link rel="prefetch" href="/Blog/assets/js/32.c66646e5.js"><link rel="prefetch" href="/Blog/assets/js/33.f71b09e6.js"><link rel="prefetch" href="/Blog/assets/js/34.2db2c84d.js"><link rel="prefetch" href="/Blog/assets/js/35.e781ab17.js"><link rel="prefetch" href="/Blog/assets/js/36.c0e78b1f.js"><link rel="prefetch" href="/Blog/assets/js/37.bfc55683.js"><link rel="prefetch" href="/Blog/assets/js/38.8878da50.js"><link rel="prefetch" href="/Blog/assets/js/39.6a60e03e.js"><link rel="prefetch" href="/Blog/assets/js/4.021d83bb.js"><link rel="prefetch" href="/Blog/assets/js/40.faf281ca.js"><link rel="prefetch" href="/Blog/assets/js/41.0830714e.js"><link rel="prefetch" href="/Blog/assets/js/42.5cb31156.js"><link rel="prefetch" href="/Blog/assets/js/43.555db188.js"><link rel="prefetch" href="/Blog/assets/js/44.ddc8a81f.js"><link rel="prefetch" href="/Blog/assets/js/45.873a99f7.js"><link rel="prefetch" href="/Blog/assets/js/46.414f0c9a.js"><link rel="prefetch" href="/Blog/assets/js/47.37a30162.js"><link rel="prefetch" href="/Blog/assets/js/48.214a8ae3.js"><link rel="prefetch" href="/Blog/assets/js/49.f520e862.js"><link rel="prefetch" href="/Blog/assets/js/5.38576c60.js"><link rel="prefetch" href="/Blog/assets/js/50.b626420b.js"><link rel="prefetch" href="/Blog/assets/js/51.95493655.js"><link rel="prefetch" href="/Blog/assets/js/52.f0eeccef.js"><link rel="prefetch" href="/Blog/assets/js/53.eef0bdde.js"><link rel="prefetch" href="/Blog/assets/js/54.16d696ea.js"><link rel="prefetch" href="/Blog/assets/js/55.e98c4925.js"><link rel="prefetch" href="/Blog/assets/js/56.92d0e2d2.js"><link rel="prefetch" href="/Blog/assets/js/57.94472b99.js"><link rel="prefetch" href="/Blog/assets/js/58.8c847ba9.js"><link rel="prefetch" href="/Blog/assets/js/59.cae2cf75.js"><link rel="prefetch" href="/Blog/assets/js/6.d66bddf3.js"><link rel="prefetch" href="/Blog/assets/js/60.16044e4b.js"><link rel="prefetch" href="/Blog/assets/js/61.d60b9d59.js"><link rel="prefetch" href="/Blog/assets/js/62.6b9c7833.js"><link rel="prefetch" href="/Blog/assets/js/63.6bd78b17.js"><link rel="prefetch" href="/Blog/assets/js/64.64c9299a.js"><link rel="prefetch" href="/Blog/assets/js/65.0ea968f3.js"><link rel="prefetch" href="/Blog/assets/js/66.6ab2e168.js"><link rel="prefetch" href="/Blog/assets/js/67.2dd1359d.js"><link rel="prefetch" href="/Blog/assets/js/68.f7e2d6df.js"><link rel="prefetch" href="/Blog/assets/js/69.57a4c88a.js"><link rel="prefetch" href="/Blog/assets/js/7.01098a8e.js"><link rel="prefetch" href="/Blog/assets/js/70.35bd081e.js"><link rel="prefetch" href="/Blog/assets/js/71.85eedb80.js"><link rel="prefetch" href="/Blog/assets/js/72.51d9fca6.js"><link rel="prefetch" href="/Blog/assets/js/73.338b2fd2.js"><link rel="prefetch" href="/Blog/assets/js/74.f445dc8f.js"><link rel="prefetch" href="/Blog/assets/js/75.643362ca.js"><link rel="prefetch" href="/Blog/assets/js/76.5317d045.js"><link rel="prefetch" href="/Blog/assets/js/77.125d07ea.js"><link rel="prefetch" href="/Blog/assets/js/78.bd65ea9e.js"><link rel="prefetch" href="/Blog/assets/js/79.5a23235e.js"><link rel="prefetch" href="/Blog/assets/js/8.47e36713.js"><link rel="prefetch" href="/Blog/assets/js/81.80416cc9.js"><link rel="prefetch" href="/Blog/assets/js/82.422ebd06.js"><link rel="prefetch" href="/Blog/assets/js/83.3da4c816.js"><link rel="prefetch" href="/Blog/assets/js/84.9427d460.js"><link rel="prefetch" href="/Blog/assets/js/85.0e9717f3.js"><link rel="prefetch" href="/Blog/assets/js/86.e9359132.js"><link rel="prefetch" href="/Blog/assets/js/87.f036bb29.js"><link rel="prefetch" href="/Blog/assets/js/88.4d613533.js"><link rel="prefetch" href="/Blog/assets/js/89.07212638.js"><link rel="prefetch" href="/Blog/assets/js/9.f35de670.js"><link rel="prefetch" href="/Blog/assets/js/90.4749a7d6.js"><link rel="prefetch" href="/Blog/assets/js/91.727d2564.js"><link rel="prefetch" href="/Blog/assets/js/92.0dc90fc7.js"><link rel="prefetch" href="/Blog/assets/js/93.29ee0241.js"><link rel="prefetch" href="/Blog/assets/js/94.87e41946.js"><link rel="prefetch" href="/Blog/assets/js/95.197ea6a0.js"><link rel="prefetch" href="/Blog/assets/js/96.4e54c3ab.js"><link rel="prefetch" href="/Blog/assets/js/97.ae07eeba.js"><link rel="prefetch" href="/Blog/assets/js/98.771976f7.js"><link rel="prefetch" href="/Blog/assets/js/99.a44111f5.js">
    <link rel="stylesheet" href="/Blog/assets/css/0.styles.6da52ff5.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/Blog/" class="home-link router-link-active"><!----> <span class="site-name">Karajan's Blog</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/Blog/blog/" class="nav-link">Blog</a></div><div class="nav-item"><a href="/Blog/book/" class="nav-link router-link-active">BookStore</a></div><div class="nav-item"><a href="/Blog/mystars/" class="nav-link">MyStars</a></div><div class="nav-item"><a href="/Blog/getsomeonestars/" class="nav-link">SomeoneStars</a></div><div class="nav-item"><a href="https://www.cnblogs.com/karajanking" target="_blank" rel="noopener noreferrer" class="nav-link external">
  博客园
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <a href="https://github.com/HerbertKarajan/Blog" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/Blog/blog/" class="nav-link">Blog</a></div><div class="nav-item"><a href="/Blog/book/" class="nav-link router-link-active">BookStore</a></div><div class="nav-item"><a href="/Blog/mystars/" class="nav-link">MyStars</a></div><div class="nav-item"><a href="/Blog/getsomeonestars/" class="nav-link">SomeoneStars</a></div><div class="nav-item"><a href="https://www.cnblogs.com/karajanking" target="_blank" rel="noopener noreferrer" class="nav-link external">
  博客园
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <a href="https://github.com/HerbertKarajan/Blog" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Git高手之路</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Javascript DOM编程艺术</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Javascript语言精粹</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Webpack实战</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>代码整洁之道</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>图解HTTP</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/Blog/book/图解HTTP/第1章 了解Web及网络基础.html" class="sidebar-link">第1章 了解Web及网络基础</a></li><li><a href="/Blog/book/图解HTTP/第2章 简单的HTTP协议.html" class="sidebar-link">第2章 简单的HTTP协议</a></li><li><a href="/Blog/book/图解HTTP/第3章 HTTP报文内的HTTP信息.html" class="sidebar-link">第3章 HTTP报文内的HTTP信息</a></li><li><a href="/Blog/book/图解HTTP/第4章 返回结果的HTTP状态码.html" class="sidebar-link">第4章 返回结果的HTTP状态码</a></li><li><a href="/Blog/book/图解HTTP/第5章 与HTTP协作的Web服务器.html" class="sidebar-link">第5章 与HTTP协作的Web服务器</a></li><li><a href="/Blog/book/图解HTTP/第6章 HTTP首部.html" class="active sidebar-link">第6章 HTTP首部</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Blog/book/图解HTTP/第6章 HTTP首部.html#_1-http报文首部" class="sidebar-link">1. HTTP报文首部</a></li><li class="sidebar-sub-header"><a href="/Blog/book/图解HTTP/第6章 HTTP首部.html#_2-http首部字段" class="sidebar-link">2. HTTP首部字段</a></li><li class="sidebar-sub-header"><a href="/Blog/book/图解HTTP/第6章 HTTP首部.html#_3-http-1-1通用首部字段" class="sidebar-link">3. HTTP/1.1通用首部字段</a></li><li class="sidebar-sub-header"><a href="/Blog/book/图解HTTP/第6章 HTTP首部.html#_4-请求首部字段" class="sidebar-link">4. 请求首部字段</a></li><li class="sidebar-sub-header"><a href="/Blog/book/图解HTTP/第6章 HTTP首部.html#_5-响应首部字段" class="sidebar-link">5. 响应首部字段</a></li><li class="sidebar-sub-header"><a href="/Blog/book/图解HTTP/第6章 HTTP首部.html#_6-实体首部字段" class="sidebar-link">6. 实体首部字段</a></li><li class="sidebar-sub-header"><a href="/Blog/book/图解HTTP/第6章 HTTP首部.html#_7-为cookie服务的首部字段" class="sidebar-link">7. 为Cookie服务的首部字段</a></li><li class="sidebar-sub-header"><a href="/Blog/book/图解HTTP/第6章 HTTP首部.html#_8-其他首部字段" class="sidebar-link">8. 其他首部字段</a></li></ul></li><li><a href="/Blog/book/图解HTTP/第7章 确保Web安全的HTTPS.html" class="sidebar-link">第7章 确保Web安全的HTTPS</a></li><li><a href="/Blog/book/图解HTTP/第8章 确认访问用户身份的认证.html" class="sidebar-link">第8章 确认访问用户身份的认证</a></li><li><a href="/Blog/book/图解HTTP/第9章 基于HTTP的功能追加协议.html" class="sidebar-link">第9章 基于HTTP的功能追加协议</a></li><li><a href="/Blog/book/图解HTTP/第10章 构建Web内容的技术.html" class="sidebar-link">第10章 构建Web内容的技术</a></li><li><a href="/Blog/book/图解HTTP/第11章 Web的攻击技术.html" class="sidebar-link">第11章 Web的攻击技术</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>学习Javascript数据结构与算法</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>高性能Javascript</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="第6章-http首部"><a href="#第6章-http首部" class="header-anchor">#</a> 第6章 HTTP首部</h1> <p></p><div class="table-of-contents"><ul><li><a href="#_1-http报文首部">1. HTTP报文首部</a></li><li><a href="#_2-http首部字段">2. HTTP首部字段</a><ul><li><a href="#_2-1-4种http首部字段类型">2.1 4种HTTP首部字段类型</a></li><li><a href="#_2-1-http-1-1首部字段一览">2.1 HTTP/1.1首部字段一览</a></li><li><a href="#_2-3-非http-1-1首部字段">2.3 非HTTP/1.1首部字段</a></li><li><a href="#_2-4-end-to-end首部和hop-by-hop首部">2.4 End-to-end首部和Hop-by-hop首部</a></li></ul></li><li><a href="#_3-http-1-1通用首部字段">3. HTTP/1.1通用首部字段</a><ul><li><a href="#cache-control">Cache-Control</a></li><li><a href="#connection">Connection</a></li><li><a href="#date">Date</a></li><li><a href="#pragma">Pragma</a></li><li><a href="#trailer">Trailer</a></li><li><a href="#transfer-encoding">Transfer-Encoding</a></li><li><a href="#upgrade">Upgrade</a></li><li><a href="#via">Via</a></li><li><a href="#warning">Warning</a></li></ul></li><li><a href="#_4-请求首部字段">4. 请求首部字段</a><ul><li><a href="#accept">Accept</a></li><li><a href="#accept-charset">Accept-Charset</a></li><li><a href="#accept-encoding">Accept-Encoding</a></li><li><a href="#accept-language">Accept-Language</a></li><li><a href="#authorization">Authorization</a></li><li><a href="#expect">Expect</a></li><li><a href="#from">From</a></li><li><a href="#host">Host</a></li><li><a href="#if-match">If-Match</a></li><li><a href="#if-modified-since">If-Modified-Since</a></li><li><a href="#if-none-match">If-None-Match</a></li><li><a href="#if-range">If-Range</a></li><li><a href="#if-unmodified-since">If-Unmodified-Since</a></li><li><a href="#max-forwards">Max-Forwards</a></li><li><a href="#proxy-authorization">Proxy-Authorization</a></li><li><a href="#range">Range</a></li><li><a href="#referer">Referer</a></li><li><a href="#te">TE</a></li><li><a href="#user-agent">User-Agent</a></li></ul></li><li><a href="#_5-响应首部字段">5. 响应首部字段</a><ul><li><a href="#accept-ranges">Accept-Ranges</a></li><li><a href="#age">Age</a></li><li><a href="#etag">ETag</a></li><li><a href="#location">Location</a></li><li><a href="#proxy-authenticate（认证）">Proxy-Authenticate（认证）</a></li><li><a href="#retry-after">Retry-After</a></li><li><a href="#server">Server</a></li><li><a href="#vary">Vary</a></li><li><a href="#www-authenticate">WWW-Authenticate</a></li></ul></li><li><a href="#_6-实体首部字段">6. 实体首部字段</a><ul><li><a href="#allow">Allow</a></li><li><a href="#content-encoding">Content-Encoding</a></li><li><a href="#content-language">Content-Language</a></li><li><a href="#content-length">Content-Length</a></li><li><a href="#content-location">Content-Location</a></li><li><a href="#contnet-md5">Contnet-MD5</a></li><li><a href="#content-range">Content-Range</a></li><li><a href="#content-type">Content-Type</a></li><li><a href="#expires">Expires</a></li><li><a href="#last-modified">Last-Modified</a></li></ul></li><li><a href="#_7-为cookie服务的首部字段">7. 为Cookie服务的首部字段</a><ul><li><a href="#set-cookie">Set-Cookie</a></li><li><a href="#cookie">Cookie</a></li></ul></li><li><a href="#_8-其他首部字段">8. 其他首部字段</a><ul><li><a href="#x-frame-options">X-Frame-Options</a></li><li><a href="#x-xss-protection">X-XSS-Protection</a></li><li><a href="#dnt（do-not-track）">DNT（Do Not Track）</a></li></ul></li></ul></div><p></p> <h2 id="_1-http报文首部"><a href="#_1-http报文首部" class="header-anchor">#</a> 1. HTTP报文首部</h2> <p>HTTP协议的请求和响应报文中必定包含HTTP首部。首部内容为客户端和服务器分别处理请求和响应提供所需要的信息。</p> <h2 id="_2-http首部字段"><a href="#_2-http首部字段" class="header-anchor">#</a> 2. HTTP首部字段</h2> <p>当HTTP报文首部中出现了两个或两个以上具有相同首部字段名时会怎么样？<br>
这种情况在规范中尚未明确，根据浏览器内部处理逻辑的不同，结果可能并不一致。有些浏览器会优先处理第一次出现的首部字段，而有些则会优先处理最后出现的首部字段。</p> <h3 id="_2-1-4种http首部字段类型"><a href="#_2-1-4种http首部字段类型" class="header-anchor">#</a> 2.1 4种HTTP首部字段类型</h3> <ul><li><p>通用首部字段<br>
请求报文和响应报文两方都会使用的首部。</p></li> <li><p>请求首部字段<br>
从客户端向服务器端发送请求报文时使用的首部。补充了请求的额外内容、客户端信息、响应内容相关优先级等信息。</p></li> <li><p>响应首部字段<br>
从服务器端向客户端返回响应报文时使用的首部。补充了响应的附加内容，也会要求客户端附加额外的内容信息。</p></li> <li><p>实体首部字段<br>
针对请求报文和响应报文的实体部分使用的首部。补充了资源内容更新时间与实体有关的信息。</p></li></ul> <h3 id="_2-1-http-1-1首部字段一览"><a href="#_2-1-http-1-1首部字段一览" class="header-anchor">#</a> 2.1 HTTP/1.1首部字段一览</h3> <p>HTTP/1.1规范定义了如下47种首部字段。</p> <p><strong>通用首部字段</strong><br> <img src="/Blog/images/HTTP%E5%9B%BE%E8%A7%A3/6%E9%80%9A%E7%94%A8%E9%A6%96%E9%83%A8%E5%AD%97%E6%AE%B5.png" alt="通用首部字段"></p> <p><strong>请求首部字段</strong><br> <img src="/Blog/images/HTTP%E5%9B%BE%E8%A7%A3/6%E8%AF%B7%E6%B1%82%E9%A6%96%E9%83%A8%E5%AD%97%E6%AE%B5.png" alt="请求首部字段"></p> <p><strong>响应首部字段</strong><br> <img src="/Blog/images/HTTP%E5%9B%BE%E8%A7%A3/6%E5%93%8D%E5%BA%94%E9%A6%96%E9%83%A8%E5%AD%97%E6%AE%B5.png" alt="响应首部字段"></p> <p><strong>实体首部字段</strong><br> <img src="/Blog/images/HTTP%E5%9B%BE%E8%A7%A3/6%E5%AE%9E%E4%BD%93%E9%A6%96%E9%83%A8%E5%AD%97%E6%AE%B5.png" alt="实体首部字段"></p> <h3 id="_2-3-非http-1-1首部字段"><a href="#_2-3-非http-1-1首部字段" class="header-anchor">#</a> 2.3 非HTTP/1.1首部字段</h3> <p>HTTP协议中通信交互中使用到的首部字段，不限于RFC2616中定义的47种首部字段。还有Cookie、Set-Cookie和Content-Disposition等在其他RFC中定义的首部字段。</p> <h3 id="_2-4-end-to-end首部和hop-by-hop首部"><a href="#_2-4-end-to-end首部和hop-by-hop首部" class="header-anchor">#</a> 2.4 End-to-end首部和Hop-by-hop首部</h3> <p>HTTP首部字段将定义成缓存代理和非缓存代理的行为，分为2种类型。</p> <h4 id="端到端首部"><a href="#端到端首部" class="header-anchor">#</a> 端到端首部</h4> <p>分在此类别中的<strong>首部会转发给请求/响应对应的最终接收目标</strong>，且必须保存在由缓存生成的响应中，另外规定它必须被转发。</p> <h4 id="逐跳首部"><a href="#逐跳首部" class="header-anchor">#</a> 逐跳首部</h4> <p>分在此类别中的<strong>首部只对单次转发有效，会因通过缓存或代理而不再转发</strong>。HTTP/1.1和之后的版本中，如果要使用hop-by-hop首部，需要提供Connection首部字段。</p> <p>下面列举了HTTP/1.1中的逐跳首部字段。除了这8个首部字段外，其他所有字段都属于端到端首部。</p> <ul><li>Connection</li> <li>Keep-Alive</li> <li>Proxy-Authenticate</li> <li>Proxy-Authorization</li> <li>Trailer]</li> <li>TE</li> <li>Transfer-Encoding</li> <li>Upgrade</li></ul> <h2 id="_3-http-1-1通用首部字段"><a href="#_3-http-1-1通用首部字段" class="header-anchor">#</a> 3. HTTP/1.1通用首部字段</h2> <p>通用首部字段是指，请求报文和响应报文双方都会使用的首部。</p> <h3 id="cache-control"><a href="#cache-control" class="header-anchor">#</a> Cache-Control</h3> <p>Cache-Control能过控制缓存的行为。<br> <img src="/Blog/images/HTTP%E5%9B%BE%E8%A7%A3/6cache-control.png" alt="cache-control"><br>
指令的参数是可选的，多个指令之间通过逗号分隔。</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>Cache-Control: private,max-age=0,no-cache
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h4 id="cache-control指令一览"><a href="#cache-control指令一览" class="header-anchor">#</a> Cache-Control指令一览</h4> <ul><li><p>缓存请求指令
<img src="/Blog/images/HTTP%E5%9B%BE%E8%A7%A3/6%E7%BC%93%E5%AD%98%E8%AF%B7%E6%B1%82%E6%8C%87%E4%BB%A4.png" alt="缓存请求指令"></p></li> <li><p>缓存响应指令
<img src="/Blog/images/HTTP%E5%9B%BE%E8%A7%A3/6%E7%BC%93%E5%AD%98%E5%93%8D%E5%BA%94%E6%8C%87%E4%BB%A4.png" alt="缓存响应指令"></p></li></ul> <h4 id="表示是否能缓存的指令"><a href="#表示是否能缓存的指令" class="header-anchor">#</a> 表示是否能缓存的指令</h4> <p><strong>public指令</strong></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>Cache-Control: public
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>明确表明其他用户也可以利用缓存。</p> <p><strong>private指令</strong><br>
响应只以特定的用户作为对象，这与public指令的行为相反。
<img src="/Blog/images/HTTP%E5%9B%BE%E8%A7%A3/6private%E6%8C%87%E4%BB%A4.png" alt="private指令"></p> <p><strong>no-cache指令</strong><br>
使用no-cache指令的目的是为了防止从缓存中返回过期的资源。</p> <p><img src="/Blog/images/HTTP%E5%9B%BE%E8%A7%A3/6no-cache%E6%8C%87%E4%BB%A4.png" alt="no-cache指令"></p> <p>客户端发送的请求中如果包含no-cahe指令，则表示客户端将不会接收缓存过的响应。于是，“中间”的缓存服务器必须把客户端请求转发给源服务器。</p> <p>如果服务器返回的响应中包含no-cahe指令，那么缓存服务器不能对资源进行缓存。源服务器以后也将不在对缓存服务器请求提出的资源有效性进行确认，且禁止其对响应资源进行缓存操作。</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>Cache-Control: no-cache=Location
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>由服务器返回的响应中，若报文首部字段Cache-Control中对no-cache字段具体指定参数，那么客户端在接收到这个被指定参数值的首部字段对应的响应报文后，就不能使用缓存。就是说，无参数值的首部字段可以使用缓存。只能在响应指令中指定该参数。</p> <h4 id="控制可执行缓存的对象的指令"><a href="#控制可执行缓存的对象的指令" class="header-anchor">#</a> 控制可执行缓存的对象的指令</h4> <p><strong>no-store指令</strong>
当使用no-store指令时，暗示请求或响应中包含机密信息。缓存不能在本地存储或响应的任一部分。</p> <p>no-cache代表不缓存过期的资源，缓存会向源服务器进行有效期确认后处理资源。no-store才是真正的不进行缓存。</p> <h4 id="指定缓存期限和认证的指令"><a href="#指定缓存期限和认证的指令" class="header-anchor">#</a> 指定缓存期限和认证的指令</h4> <p><strong>s-maxage指令</strong></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>Cache-Control: s-maxage=604800（单位 ：秒）
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>s-maxage 指令的功能和 max-age 指令的相同，它们的不同点是 s-maxage 指令只适用于供多位用户使用的公共缓存服务器。也就是
说，对于向同一用户重复返回响应的服务器来说，这个指令没有任何
作用。</p> <p>另外，当使用 s-maxage 指令后，则直接忽略对 Expires 首部字段及 max-age 指令的处理。</p> <p><strong>max-age 指令</strong><br> <img src="/Blog/images/HTTP%E5%9B%BE%E8%A7%A3/6max-age%E6%8C%87%E4%BB%A4.png" alt="max-age指令"></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>Cache-Control: max-age=604800（单位：秒）
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>当客户端发送的请求中包含 max-age 指令时，如果判定缓存资源的缓
存时间数值比指定时间的数值更小，那么客户端就接收缓存的资源。
另外，当指定 max-age 值为 0，那么缓存服务器通常需要将请求转发
给源服务器。</p> <p>当服务器返回的响应中包含 max-age 指令时，缓存服务器将不对资源
的有效性再作确认，而 max-age 数值代表资源保存为缓存的最长时
间。</p> <p>应用 HTTP/1.1 版本的缓存服务器遇到同时存在 Expires 首部字段的情况时，会优先处理 max-age 指令，而忽略掉 Expires 首部字段。而HTTP/1.0 版本的缓存服务器的情况却相反，max-age 指令会被忽略掉。</p> <p><strong>min-fresh 指令</strong><br> <img src="/Blog/images/HTTP%E5%9B%BE%E8%A7%A3/6min-fresh%E6%8C%87%E4%BB%A4.png" alt="min-fresh指令"></p> <p>min-fresh 指令要求缓存服务器返回至少还未过指定时间的缓存资源。<br>
比如，当指定 min-fresh 为 60 秒后，过了 60 秒的资源都无法作为响应返回了。</p> <p><strong>max-stale 指令</strong></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>Cache-Control: max-stale=3600（单位：秒）
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>使用 max-stale 可指示缓存资源，即使过期也照常接收。
如果指令未指定参数值，那么无论经过多久，客户端都会接收响应；
如果指令中指定了具体数值，那么即使过期，只要仍处于 max-stale
指定的时间内，仍旧会被客户端接收。</p> <p><strong>only-if-cached 指令</strong></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>Cache-Control: only-if-cached
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>使用 only-if-cached 指令表示客户端仅在缓存服务器本地缓存目标资源的情况下才会要求其返回。换言之，该指令要求缓存服务器不重新
加载响应，也不会再次确认资源有效性。若发生请求缓存服务器的本
地缓存无响应，则返回状态码 504 Gateway Timeout。</p> <p><strong>must-revalidate 指令</strong><br>
使用 must-revalidate 指令，代理会向源服务器再次验证即将返回的响应缓存目前是否仍然有效。<br>
若代理无法连通源服务器再次获取有效资源的话，缓存必须给客户端
一条 504（Gateway Timeout）状态码。<br>
另外，使用 must-revalidate 指令会忽略请求的 max-stale 指令（即使已经在首部使用了 max-stale，也不会再有效果）。</p> <p><strong>proxy-revalidate 指令</strong><br>
proxy-revalidate 指令要求所有的缓存服务器在接收到客户端带有该指令的请求返回响应之前，必须再次验证缓存的有效性。</p> <p><strong>no-transform 指令</strong><br>
使用 no-transform 指令规定无论是在请求还是响应中，缓存都不能改变实体主体的媒体类型。</p> <p>这样做可防止缓存或代理压缩图片等类似操作。</p> <h4 id="cache-control-扩展"><a href="#cache-control-扩展" class="header-anchor">#</a> Cache-Control 扩展</h4> <p>cache-extension token</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>Cache-Control: private, community=&quot;UCI&quot;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>通过 cache-extension 标记（token），可以扩展Cache-Control 首部字段内的指令。</p> <p>如上例，Cache-Control 首部字段本身没有 community 这个指令。借助 extension tokens 实现了该指令的添加。如果缓存服务器不能理解 community 这个新指令，就会直接忽略。因此，extension tokens 仅对能理解它的缓存服务器来说是有意义的。</p> <h3 id="connection"><a href="#connection" class="header-anchor">#</a> Connection</h3> <p>Connection有两个作用：</p> <ul><li>控制不在转发给代理的首部字段</li> <li>管理持久连接</li></ul> <h4 id="控制代理不再转发的首部字段"><a href="#控制代理不再转发的首部字段" class="header-anchor">#</a> 控制代理不再转发的首部字段</h4> <p><img src="/Blog/images/HTTP%E5%9B%BE%E8%A7%A3/6Connection1.png" alt="Connection1"></p> <blockquote><p>Connection: 不再转发的首部字段名</p></blockquote> <p>在客户端发送请求和服务器返回响应内，使用Connection首部字段，可控制不再转发给代理的首部字段（Hop-by-hop首部，共有8个值）。</p> <h4 id="管理持久连接"><a href="#管理持久连接" class="header-anchor">#</a> 管理持久连接</h4> <blockquote><p>Connection: close</p></blockquote> <p>HTTP/1.1版本的默认连接都是持久连接。客户端会在持久连接上连续发送请求。当服务器想明确断开连接时，则指定Connection首部字段值为close。
<img src="/Blog/images/HTTP%E5%9B%BE%E8%A7%A3/6Connection2.png" alt="Connection2"></p> <p><strong>HTTP/1.1之前的HTTP版本的默认连接都是非持久连接。所以想要在旧版本的HTTP协议上维持持久连接，则需要指定Connection首部字段的值为Keep-Alive。</strong></p> <h3 id="date"><a href="#date" class="header-anchor">#</a> Date</h3> <p>首部字段Date表明创建HTTP报文的日期和时间。</p> <blockquote><p>Date: Tue, 03 Jul 2012 04:40:59 GMT</p></blockquote> <h3 id="pragma"><a href="#pragma" class="header-anchor">#</a> Pragma</h3> <p>Pragma是HTTP/1.1之前版本的历史遗留字段，仅作为与HTTP/1.0的向后兼容而定义。</p> <blockquote><p>Pragma: no-cache</p></blockquote> <p>该首部字段属于通用首部字段，但只用在客户端发送的请求中。客户端会要求所有的中间服务器不返回缓存的资源。</p> <p>整体掌握全部中间服务器使用的HTTP协议版本是不现实的。所以发送时会同时有两个首部字段：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>Cache-Control: no-cache
Pragma: no-cache
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="trailer"><a href="#trailer" class="header-anchor">#</a> Trailer</h3> <p><img src="/Blog/images/HTTP%E5%9B%BE%E8%A7%A3/6Trailer.png" alt="Trailer"><br>
Trailer会事先说明在报文主体后记录了哪些首部字段。可用在HTTP/1.1版本分块传输编码时。</p> <p><img src="/Blog/images/HTTP%E5%9B%BE%E8%A7%A3/6Trailer2.png" alt="Trailer2"><br>
上面代码中，指定Trailer值为Expires，在报文主体之后出现了首部字段Expires。</p> <h3 id="transfer-encoding"><a href="#transfer-encoding" class="header-anchor">#</a> Transfer-Encoding</h3> <p><img src="/Blog/images/HTTP%E5%9B%BE%E8%A7%A3/6Transfer-Encoding.png" alt="Transfer-Encoding"><br>
规定了传输报文主体时采用的编码方式。</p> <p>HTTP/1.1的传输编码方式仅对分块传输编码有效。</p> <blockquote><p>Transfer-Encoding: chunked</p></blockquote> <h3 id="upgrade"><a href="#upgrade" class="header-anchor">#</a> Upgrade</h3> <p>Upgrade用于检测HTTP协议及其他协议是否可使用更高的版本进行通信，其参数值可以用来指定一个完全不同的协议。
<img src="/Blog/images/HTTP%E5%9B%BE%E8%A7%A3/6Upgrade.png" alt="Upgrade"></p> <p>图中，<strong>Upgrade首部字段产生作用的Upgrade对象仅限于客户端和邻接服务器之间。因此，使用首部字段Upgrade时，还需要额外指定Connection: Upgrade。</strong></p> <p>对于附有Upgrade的请求，服务器可用101 Switching Protocols状态码作为响应返回。</p> <h3 id="via"><a href="#via" class="header-anchor">#</a> Via</h3> <p>使用Via是为了追踪客户端与服务器间的请求和响应报文的传输路径。<br>
报文经过代理或网关时，会先在首部字段Via中附加该服务器的信息再进行转发。<br>
Via不仅用于追踪报文的转发，还可避免请求回环的发生。所以必须在经过代理时附加该首部字段内容。</p> <p><img src="/Blog/images/HTTP%E5%9B%BE%E8%A7%A3/6Via.png" alt="Via"><br>
上面的1.0是指接收请求的服务器上应用的HTTP协议版本。</p> <h3 id="warning"><a href="#warning" class="header-anchor">#</a> Warning</h3> <p>HTTP/1.1的Warning首部是从HTTP/1.0的响应首部（Retry-After）演变过来的。该首部通常会告知用户一些与缓存相关的问题的警告。</p> <p><img src="/Blog/images/HTTP%E5%9B%BE%E8%A7%A3/6Warning.png" alt="Warning"><br> <img src="/Blog/images/HTTP%E5%9B%BE%E8%A7%A3/6Warning%E8%AD%A6%E5%91%8A%E7%A0%81.png" alt="Warning警告码"></p> <h2 id="_4-请求首部字段"><a href="#_4-请求首部字段" class="header-anchor">#</a> 4. 请求首部字段</h2> <p>请求首部字段是请求报文中所使用的字段，用于补充请求的附加信息、客户端信息、对响应内容相关的优先级等内容。</p> <h3 id="accept"><a href="#accept" class="header-anchor">#</a> Accept</h3> <p><img src="/Blog/images/HTTP%E5%9B%BE%E8%A7%A3/6Accept.png" alt="Accept"><br>
可以通知服务器，用户代理能够处理的媒体类型及媒体类型的相对优先级。</p> <p>使用q=可以给媒体类型增加权重优先级，用分号进行分隔。权重值的范围是0~1,默认为q=1.0。当服务器提供多种内容时，将会首先返回权重值最高的媒体类型。</p> <h3 id="accept-charset"><a href="#accept-charset" class="header-anchor">#</a> Accept-Charset</h3> <p><img src="/Blog/images/HTTP%E5%9B%BE%E8%A7%A3/6Accept-Charset.png" alt="Accept-Charset"><br>
可以通知服务器用户代理支持的字符集及字符集的相对优先顺序。</p> <h3 id="accept-encoding"><a href="#accept-encoding" class="header-anchor">#</a> Accept-Encoding</h3> <p><img src="/Blog/images/HTTP%E5%9B%BE%E8%A7%A3/6Accept-Encoding.png" alt="Accept-Encoding"><br>
用来告知服务器用户代理支持的内容编码及内容编码的优先级顺序。</p> <ul><li>gzip</li> <li>compress</li> <li>deflate</li> <li>identity：不执行压缩</li></ul> <p>可以使用*作为通配符，指定任意的编码格式。</p> <h3 id="accept-language"><a href="#accept-language" class="header-anchor">#</a> Accept-Language</h3> <p><img src="/Blog/images/HTTP%E5%9B%BE%E8%A7%A3/6Accept-Language.png" alt="Accept-Language"><br>
用来告知服务器用户代理能够处理的自然语言集（中文或英文等），以及语言集的相对优先级。</p> <h3 id="authorization"><a href="#authorization" class="header-anchor">#</a> Authorization</h3> <p><img src="/Blog/images/HTTP%E5%9B%BE%E8%A7%A3/6Authorization.png" alt="Authorization"><br>
用来告知服务器，用户代理的认证信息。想要通过服务器认证的用户代理会在接收到返回的401状态码响应后，把首部字段Authorization加入请求中。</p> <h3 id="expect"><a href="#expect" class="header-anchor">#</a> Expect</h3> <p><img src="/Blog/images/HTTP%E5%9B%BE%E8%A7%A3/6Expect.png" alt="Expect"><br>
来告知服务器，期望出现的某种特定行为。因服务器无法理解客户端的期望做出回应而发生错误时，会返回状态码417 Expectation Failed。</p> <p>客户端可以利用该首部字段，写明所期望的扩展。虽然HTTP/1.1规范只定义了100-continue。</p> <h3 id="from"><a href="#from" class="header-anchor">#</a> From</h3> <p><img src="/Blog/images/HTTP%E5%9B%BE%E8%A7%A3/6From.png" alt="From"><br>
用来告知服务器使用用户代理的用户的电子邮件地址。通常其目的就是为了显示搜索引擎等用户代理的负责人的电子邮件联系方式。</p> <h3 id="host"><a href="#host" class="header-anchor">#</a> Host</h3> <p><img src="/Blog/images/HTTP%E5%9B%BE%E8%A7%A3/6Host.png" alt="Host"><br>
告知服务器，请求的资源所处的互联网主机名和端口号。<strong>Host首部字段在HTTP/1.1规范内是唯一一个必须包含在请求内的首部字段。</strong></p> <p>Host和以单台服务器分配多个域名的虚拟主机的工作机制有很密切的关联，这是Host必须存在的意义。</p> <p>请求被发送至服务器时，请求中的主机名会直接被用IP地址直接替换掉。<strong>但如果这时，相同的IP地址下部署运行多个域名，那么服务器就会无法理解究竟是哪个域名对应的请求。因此，就需要使用Host来明确指出请求的主机名。</strong></p> <h3 id="if-match"><a href="#if-match" class="header-anchor">#</a> If-Match</h3> <p><img src="/Blog/images/HTTP%E5%9B%BE%E8%A7%A3/6If-Match.png" alt="If-Match"><br>
形如If-xxx这样的请求首部字段，都可称为条件请求。服务器接收到附带条件的请求后，只有判断指定条件为真时，才会执行请求。
<img src="/Blog/images/HTTP%E5%9B%BE%E8%A7%A3/6If-Match-ETag.png" alt="If-Match-ETag"></p> <p>服务器会对比If-Match的字段值和ETag的值，仅当两者一致时，才会执行请求。否则返回412 Precondition Failed的响应。还可以使用*指定If-Match的字段值。服务器会忽略ETag的值，只要资源存在就处理请求。</p> <h3 id="if-modified-since"><a href="#if-modified-since" class="header-anchor">#</a> If-Modified-Since</h3> <p><img src="/Blog/images/HTTP%E5%9B%BE%E8%A7%A3/6If-Modified-Since.png" alt="If-Modified-Since"><br>
它会告知服务器若If-Modified-Since字段值早于资源的更新时间，则希望能处理该请求。否则，如果请求的资源都没有过更新，则返回状态码304 Not Modified的响应。</p> <p>If-Modified-Since用于确认代理或客户端拥有的本地资源的有效性。获取资源的更新日期时间，可通过确认首部字段Last-Modified来确定。</p> <h3 id="if-none-match"><a href="#if-none-match" class="header-anchor">#</a> If-None-Match</h3> <p><img src="/Blog/images/HTTP%E5%9B%BE%E8%A7%A3/6If-None-Match.png" alt="If-None-Match"><br>
它和If-Match作用相反。用于指定If-None-Match字段值的实体标记（ETag）值与请求资源的ETag不一致时，它就告知服务器处理该请求。</p> <p>在GET或HEAD方法中使用If-None-Match可获取最新的资源。</p> <h3 id="if-range"><a href="#if-range" class="header-anchor">#</a> If-Range</h3> <p><img src="/Blog/images/HTTP%E5%9B%BE%E8%A7%A3/6If-Range.png" alt="If-Range"><br>
告知服务器若指定的If-Range字段值和请求资源的ETag值相同时，则作为范围请求处理。否则，返回全体资源。</p> <p><img src="/Blog/images/HTTP%E5%9B%BE%E8%A7%A3/6If-Rangex.png" alt="If-Rangex"><br>
服务器端的资源如果更新，那客户端持有资源中的一部分也会随之无效。这时，服务器会暂且以状态码412 Precondition Failed作为响应返回，其目的是催促客户端再次发送请求。与使用首部字段If-Range比起来，就要花费两倍的功夫。</p> <h3 id="if-unmodified-since"><a href="#if-unmodified-since" class="header-anchor">#</a> If-Unmodified-Since</h3> <blockquote><p>If-Unmodified-Since: Thu,03 Jul 2012 00:00:00 GMT
If-Unmodified-Since和If-Modified-Since作用相反。它的作用是告知服务器，指定的请求资源只有在字段值内指定的日期时间之后，未发生更新的情况下，才能处理请求。如果指定的时间发生了更新，则以状态码412 Precodition Failed作为响应返回。</p></blockquote> <h3 id="max-forwards"><a href="#max-forwards" class="header-anchor">#</a> Max-Forwards</h3> <p><img src="/Blog/images/HTTP%E5%9B%BE%E8%A7%A3/6Max-Forwards.png" alt="Max-Forwards"><br>
通过TRACE或OPTIONS方法，发送包含Max-Forwards的请求时，该字段以十进制整数形式指定可经过的服务器最大数目。服务器在往下一个服务器转发请求之前，会将Max-Forward上的值减1后重新赋值。当服务器接收到Max-Forwards值为0的请求时，则不再进行转发，而是直接返回响应。</p> <p>可以通过它来对传输路径的通信状况有所把握。
<img src="/Blog/images/HTTP%E5%9B%BE%E8%A7%A3/6Max-Forwardsx1.png" alt="Max-Forwardsx1"><br> <img src="/Blog/images/HTTP%E5%9B%BE%E8%A7%A3/6Max-Forwardsx2.png" alt="Max-Forwardsx2"></p> <h3 id="proxy-authorization"><a href="#proxy-authorization" class="header-anchor">#</a> Proxy-Authorization</h3> <blockquote><p>Proxy-Authorization: Basic ksdfjadksdj
接收到从<strong>代理服务器发来的认证质询</strong>时客户端会发送包含首部字段Proxy-Authorization的请求，以告知服务器认证所需要的信息。</p></blockquote> <p>这个行为是与客户端和服务端之间的HTTP访问认证相类似的，不同的是，认证行为发生在客户端和代理之间。客户端和服务器间的认证，使用Authorization可起到相同的作用。</p> <h3 id="range"><a href="#range" class="header-anchor">#</a> Range</h3> <blockquote><p>Range: bytes=5001-10000
对于只需获取部分资源的范围请求，包含首部字段Range即可告知服务器资源的指定范围。</p></blockquote> <p>接收到附带Range首部字段请求的服务器，会在处理请求之后返回状态码为206 Partial Content的响应。无法处理该范围请求时，则会返回200 OK的响应及全部资源。</p> <h3 id="referer"><a href="#referer" class="header-anchor">#</a> Referer</h3> <p><img src="/Blog/images/HTTP%E5%9B%BE%E8%A7%A3/6Referer.png" alt="Referer"><br>
会告知服务器请求的原始资源的URI。</p> <p>客户端一般都会发送Referer给服务器。但当直接在浏览器的地址栏输入URI，或出于安全性的考虑时，也可以不发送该字段。因为原始资源的URI中的查询字符串可能含有ID和密码等保密信息，写进Referer会导致信息泄露。</p> <h3 id="te"><a href="#te" class="header-anchor">#</a> TE</h3> <blockquote><p>TE: gzip, deflate;q=0.5
TE会告知服务器客户端能够处理响应的<strong>传输编码方式</strong>及相对优先级。它和Accept-Encoding很像，但用于传输编码。</p></blockquote> <h3 id="user-agent"><a href="#user-agent" class="header-anchor">#</a> User-Agent</h3> <p><img src="/Blog/images/HTTP%E5%9B%BE%E8%A7%A3/6User-Agent.png" alt="User-Agent"><br>
User-Agent会将创建请求的浏览器和用户代理名称等信息传达给服务器。</p> <h2 id="_5-响应首部字段"><a href="#_5-响应首部字段" class="header-anchor">#</a> 5. 响应首部字段</h2> <p>响应首部字段是由服务器端向客户端返回响应报文中所使用的字段，用于补充响应的附加信息、服务器信息，以及对客户端的附加要求等信息。</p> <h3 id="accept-ranges"><a href="#accept-ranges" class="header-anchor">#</a> Accept-Ranges</h3> <p><img src="/Blog/images/HTTP%E5%9B%BE%E8%A7%A3/6Accept-Ranges.png" alt="Accept-Ranges"><br>
告知客户端，服务器能否处理范围请求，以指定获取服务器端某个部分的资源。可以指定两个值，可处理范围请求时指定为bytes，反之则指定为none。</p> <h3 id="age"><a href="#age" class="header-anchor">#</a> Age</h3> <p><img src="/Blog/images/HTTP%E5%9B%BE%E8%A7%A3/6Age.png" alt="Age"><br>
告知客户端，源服务器在多久前创建了响应。单位为秒。</p> <p>若创建该响应的服务器是缓存服务器，Age值是指缓存后的响应再次发起认证到认证完成的时间值。代理创建响应时必须加上首部字段Age。</p> <h3 id="etag"><a href="#etag" class="header-anchor">#</a> ETag</h3> <p><img src="/Blog/images/HTTP%E5%9B%BE%E8%A7%A3/6ETag.png" alt="ETag"><br>
ETag能告知客户端实体标识。服务器会为每份资源分配对应的ETag值。</p> <p>当资源更新时，ETag也需要更新。<br> <img src="/Blog/images/HTTP%E5%9B%BE%E8%A7%A3/6ETag2.png" alt="ETag2"><br>
资源被缓存时，就会被分配唯一的标识。若在下载过程中出现连接中断、再连接的情况，都会依照ETag值来指定资源。</p> <h4 id="强etag值和弱etag值"><a href="#强etag值和弱etag值" class="header-anchor">#</a> 强ETag值和弱ETag值</h4> <p><strong>强ETag值</strong>
不论发生多么细微的变化都会改变其值。</p> <blockquote><p>ETag: &quot;usagi-1234&quot;</p></blockquote> <p><strong>弱ETag值</strong>
只用于提示资源是否相同。只有资源发生了根本改变，产生差异时才会改变ETag值。会在字段值开始处附加W/。</p> <blockquote><p>ETag: W/&quot;usagi-1234&quot;</p></blockquote> <h3 id="location"><a href="#location" class="header-anchor">#</a> Location</h3> <p><img src="/Blog/images/HTTP%E5%9B%BE%E8%A7%A3/6Location.png" alt="Location"><br>
Location可将响应接收方引导至某个与请求URI位置不同的资源。该字段会配合3XX: Redirection的响应，提供重定向的URI。</p> <h3 id="proxy-authenticate（认证）"><a href="#proxy-authenticate（认证）" class="header-anchor">#</a> Proxy-Authenticate（认证）</h3> <blockquote><p>Proxy-Authenticate: Basic realm=&quot;Usagidesign Auth&quot;
Proxy-Authenticate会把代理服务器所要求的认证信息发送给客户端。</p></blockquote> <p>它与客户端和服务器间的HTTP访问认证的行为相似，不同之处在于其认证行为是在客户端与代理间进行。而客户端与服务器间进行认证时，WWW-Authorization有着相同的作用。</p> <h3 id="retry-after"><a href="#retry-after" class="header-anchor">#</a> Retry-After</h3> <p><img src="/Blog/images/HTTP%E5%9B%BE%E8%A7%A3/6Retry-After.png" alt="Retry-After"><br>
告知客户端应该在多久之后再次发送请求。主要配合状态码503 Service Unavailable 响应，或3XX Redirect响应一起使用。字段值可以指定具体的日期时间（Wed, 04 Jul 2012 0:34:23 GMT等格式），也可以是创建响应后的秒数。</p> <h3 id="server"><a href="#server" class="header-anchor">#</a> Server</h3> <p><img src="/Blog/images/HTTP%E5%9B%BE%E8%A7%A3/6Server.png" alt="Server"><br>
告知客户端当前服务器上安装的HTTP服务器应用程序的信息。</p> <h3 id="vary"><a href="#vary" class="header-anchor">#</a> Vary</h3> <p><img src="/Blog/images/HTTP%E5%9B%BE%E8%A7%A3/6Vary.png" alt="Vary"><br>
首部字段Vary可以对缓存进行控制。源服务器会向代理服务器传达关于本地缓存使用方法的命令。</p> <p>从代理服务器接收到源服务器返回包含Vary指定项的响应后，若再要进行缓存，仅对请求中含有相同Vary指定首部字段的请求返回缓存。即使对相同资源发起请求，但由于Vary指定的首部字段不同，因此必须要从源服务器重新获取资源。</p> <h3 id="www-authenticate"><a href="#www-authenticate" class="header-anchor">#</a> WWW-Authenticate</h3> <blockquote><p>WWW-Authenticate: Basic realm=&quot;Usagidesign Auth&quot;
用于HTTP访问认证。会告知客户端适用于访问请求URI所指定资源的认证方案（Basic或Digest）和带参数提示的质询。状态码401 Unauthorized响应中，肯定带有WWW-Authenticate。</p></blockquote> <h2 id="_6-实体首部字段"><a href="#_6-实体首部字段" class="header-anchor">#</a> 6. 实体首部字段</h2> <p>实体首部字段是包含在请求报文和响应报文中的实体部分所使用的首部，用于补充内容的更新时间等于实体相关的信息。</p> <h3 id="allow"><a href="#allow" class="header-anchor">#</a> Allow</h3> <p><img src="/Blog/images/HTTP%E5%9B%BE%E8%A7%A3/6Allow.png" alt="Allow"><br>
用于通知客户端能够支持Request-URI指定资源的所有HTTP方法。当服务器接收到不支持的HTTP方法时，会以405 Method Not Allowed作为响应返回。</p> <h3 id="content-encoding"><a href="#content-encoding" class="header-anchor">#</a> Content-Encoding</h3> <blockquote><p>Content-Encoding: gzip
会告知客户端服务器对实体的主体部分选用的内容编码方式。主要使用以下4中方式：</p></blockquote> <ul><li>gzip</li> <li>compress</li> <li>deflate</li> <li>identity</li></ul> <h3 id="content-language"><a href="#content-language" class="header-anchor">#</a> Content-Language</h3> <blockquote><p>Content-Language: zh-CN
会告知客户端，实体主体使用的自然语言。</p></blockquote> <h3 id="content-length"><a href="#content-length" class="header-anchor">#</a> Content-Length</h3> <blockquote><p>Content-Length: 15000
表明了实体主体部分的大小。对实体主体进行内容编码传输时，不能再使用Content-Length。</p></blockquote> <h3 id="content-location"><a href="#content-location" class="header-anchor">#</a> Content-Location</h3> <blockquote><p>Content-Location: http://www.hackr.jp/xx.html
给出与报文主体部分相对应的URI。和Location不同，Content-Location表示的是报文主体返回资源对应的URI。</p></blockquote> <h3 id="contnet-md5"><a href="#contnet-md5" class="header-anchor">#</a> Contnet-MD5</h3> <p><img src="/Blog/images/HTTP%E5%9B%BE%E8%A7%A3/6Content-MD5.png" alt="Content-MD5"><br>
Content-MD5是一串由MD5算法生成的值，其目的在于检查报文主体在传输过程中是否保持完整，以及确认传输到达。</p> <h3 id="content-range"><a href="#content-range" class="header-anchor">#</a> Content-Range</h3> <p><img src="/Blog/images/HTTP%E5%9B%BE%E8%A7%A3/6Content-Range.png" alt="Content-Range"><br>
针对范围请求，返回响应时使用的首部字段Content-Range，能告知客户端作为响应返回的实体的那个部分符合范围请求。字段值以字节为单位，表示当前发送部分及整个实体大小。</p> <h3 id="content-type"><a href="#content-type" class="header-anchor">#</a> Content-Type</h3> <blockquote><p>Content-Type: text/html; charset=UTF-8
说明了实体主体内对象的媒体类型。</p></blockquote> <h3 id="expires"><a href="#expires" class="header-anchor">#</a> Expires</h3> <p><img src="/Blog/images/HTTP%E5%9B%BE%E8%A7%A3/6Expires.png" alt="Expires"><br>
Expires会将资源失效的日期告知客户端。缓存服务器在接收到含有Expires的响应后，会以缓存来应答请求，在Expires指定的时间之前，响应的副本会一直被保存。当超过指定的时间后，缓存服务器在请求发送过来时，会转向源服务器请求资源。</p> <p>当Cache-Control有指定max-age指令时，比起Expires，会优先处理max-age指令。</p> <h3 id="last-modified"><a href="#last-modified" class="header-anchor">#</a> Last-Modified</h3> <p><img src="/Blog/images/HTTP%E5%9B%BE%E8%A7%A3/6Last-Modifiedx.png" alt="Last-Modified"><br>
指明资源最终修改的时间。</p> <h2 id="_7-为cookie服务的首部字段"><a href="#_7-为cookie服务的首部字段" class="header-anchor">#</a> 7. 为Cookie服务的首部字段</h2> <p>Cookie的工作机制是用户识别及状态管理。
<img src="/Blog/images/HTTP%E5%9B%BE%E8%A7%A3/6%E4%B8%BACookie%E6%9C%8D%E5%8A%A1%E7%9A%84%E9%A6%96%E9%83%A8%E5%AD%97%E6%AE%B5.png" alt="为Cookie服务的首部字段"></p> <h3 id="set-cookie"><a href="#set-cookie" class="header-anchor">#</a> Set-Cookie</h3> <blockquote><p>Set-Cookie: status=enable; expires=Tue, 05 Jul 2011 07:26:31 GMT; path=/; domain=.hackr.jp;</p></blockquote> <p>响应首部 Set-Cookie 被用来由服务器端向客户端发送 cookie。
<img src="/Blog/images/HTTP%E5%9B%BE%E8%A7%A3/6Set-Cookie%E5%AD%97%E6%AE%B5%E5%B1%9E%E6%80%A7.png" alt="Set-Cookie字段属性"></p> <p>HttpOnly属性使JS脚本（ Document.cookie 属性、XMLHttpRequest 和  Request APIs 进行访问）无法获得Cookie。其主要目的是为了防止跨站脚本攻击（Cross-site-scripting,XSS）对Cookie的信息窃取。</p> <h3 id="cookie"><a href="#cookie" class="header-anchor">#</a> Cookie</h3> <p>Cookie 是一个请求首部，其中含有先前由服务器通过 Set-Cookie  首部投放并存储到客户端的 HTTP cookies。</p> <p>这个首部可能会被完全移除，例如在浏览器的隐私设置里面设置为禁用cookie。</p> <h2 id="_8-其他首部字段"><a href="#_8-其他首部字段" class="header-anchor">#</a> 8. 其他首部字段</h2> <p>HTTP首部字段是可以自行扩展的。所以在Web服务器和浏览器的应用上回出现各种非标准的首部字段。</p> <h3 id="x-frame-options"><a href="#x-frame-options" class="header-anchor">#</a> X-Frame-Options</h3> <blockquote><p>X-Frame-Options: DENY</p></blockquote> <p>X-Frame-Options HTTP 响应头是用来给浏览器 指示允许一个页面 可否在 &lt;frame&gt;, &lt;iframe&gt;, &lt;embed&gt; 或者 &lt;object&gt; 中展现的标记。站点可以通过确保网站没有被嵌入到别人的站点里面，从而避免 clickjacking点击劫持攻击 攻击。</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>X-Frame-Options: deny
X-Frame-Options: sameorigin
X-Frame-Options: allow-from https://example.com/
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><ul><li><p>deny
表示该页面不允许在 frame 中展示，即便是在相同域名的页面中嵌套也不允许。</p></li> <li><p>sameorigin
表示该页面可以在相同域名页面的 frame 中展示。</p></li> <li><p>allow-from uri
表示该页面可以在指定来源的 frame 中展示。</p></li></ul> <h3 id="x-xss-protection"><a href="#x-xss-protection" class="header-anchor">#</a> X-XSS-Protection</h3> <blockquote><p>X-XSS-Protection: 1
属于HTTP响应首部，它是针对跨站脚本攻击（XSS）的一种对策，用于控制浏览器XSS防护机制的开关。</p></blockquote> <ul><li>0：将XSS过滤设置为无效状态</li> <li>1：将XSS过滤设置为有效状态</li></ul> <h3 id="dnt（do-not-track）"><a href="#dnt（do-not-track）" class="header-anchor">#</a> DNT（Do Not Track）</h3> <p>DNT属于HTTP请求首部，拒绝个人信息被收集，表示拒绝被精准广告追踪的的一种方法。</p> <ul><li>0：同意被追踪</li> <li>1：拒绝被追踪</li></ul> <h4 id="使用-javascript-读取-“不追踪”-（do-not-track）状态"><a href="#使用-javascript-读取-“不追踪”-（do-not-track）状态" class="header-anchor">#</a> 使用 JavaScript 读取 “不追踪” （Do Not Track）状态</h4> <p>用户对 DNT 的设置还可以使用 Navigator.doNotTrack 属性进行读取:</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>navigator.doNotTrack; // &quot;0&quot; or &quot;1&quot;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/HerbertKarajan/Blog/edit/main/docs/book/图解HTTP/第6章 HTTP首部.md" target="_blank" rel="noopener noreferrer">Edit this page</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">4/23/2021, 8:59:23 AM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/Blog/book/图解HTTP/第5章 与HTTP协作的Web服务器.html" class="prev">第5章 与HTTP协作的Web服务器</a></span> <span class="next"><a href="/Blog/book/图解HTTP/第7章 确保Web安全的HTTPS.html">第7章 确保Web安全的HTTPS</a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/Blog/assets/js/app.948c224d.js" defer></script><script src="/Blog/assets/js/3.079b83dd.js" defer></script><script src="/Blog/assets/js/80.d3d625e1.js" defer></script>
  </body>
</html>
