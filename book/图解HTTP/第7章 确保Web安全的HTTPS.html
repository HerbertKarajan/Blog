<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>第7章 确保Web安全的HTTPS | Karajan&#39;s Blog</title>
    <meta name="description" content="Karajan&#39;s Blog">
    <link rel="icon" href="https://github.githubassets.com/favicon.ico">
    
    <link rel="preload" href="/Blog/assets/css/0.styles.6da52ff5.css" as="style"><link rel="preload" href="/Blog/assets/js/app.948c224d.js" as="script"><link rel="preload" href="/Blog/assets/js/3.079b83dd.js" as="script"><link rel="preload" href="/Blog/assets/js/81.80416cc9.js" as="script"><link rel="prefetch" href="/Blog/assets/js/10.3d6b0cd5.js"><link rel="prefetch" href="/Blog/assets/js/100.aed825bb.js"><link rel="prefetch" href="/Blog/assets/js/101.667e09b8.js"><link rel="prefetch" href="/Blog/assets/js/102.fbcf3c98.js"><link rel="prefetch" href="/Blog/assets/js/103.27ee6ddc.js"><link rel="prefetch" href="/Blog/assets/js/104.6082dbbd.js"><link rel="prefetch" href="/Blog/assets/js/105.85f7c82b.js"><link rel="prefetch" href="/Blog/assets/js/106.bd24f0a1.js"><link rel="prefetch" href="/Blog/assets/js/107.7ed79822.js"><link rel="prefetch" href="/Blog/assets/js/108.943cb8b0.js"><link rel="prefetch" href="/Blog/assets/js/109.54b03b44.js"><link rel="prefetch" href="/Blog/assets/js/11.f748cc5d.js"><link rel="prefetch" href="/Blog/assets/js/110.aa61cdc5.js"><link rel="prefetch" href="/Blog/assets/js/111.118ac3b2.js"><link rel="prefetch" href="/Blog/assets/js/112.8f8f4791.js"><link rel="prefetch" href="/Blog/assets/js/12.72a6e189.js"><link rel="prefetch" href="/Blog/assets/js/13.51e6d906.js"><link rel="prefetch" href="/Blog/assets/js/14.dd2020ff.js"><link rel="prefetch" href="/Blog/assets/js/15.1edd9643.js"><link rel="prefetch" href="/Blog/assets/js/16.d11b5fdc.js"><link rel="prefetch" href="/Blog/assets/js/17.7ce57992.js"><link rel="prefetch" href="/Blog/assets/js/18.85248e1e.js"><link rel="prefetch" href="/Blog/assets/js/19.e41cd270.js"><link rel="prefetch" href="/Blog/assets/js/2.dfae10df.js"><link rel="prefetch" href="/Blog/assets/js/20.f6a8c36e.js"><link rel="prefetch" href="/Blog/assets/js/21.864d0000.js"><link rel="prefetch" href="/Blog/assets/js/22.7f1c3ef7.js"><link rel="prefetch" href="/Blog/assets/js/23.1e9baa52.js"><link rel="prefetch" href="/Blog/assets/js/24.22024d44.js"><link rel="prefetch" href="/Blog/assets/js/25.5b83a272.js"><link rel="prefetch" href="/Blog/assets/js/26.b9ba3d59.js"><link rel="prefetch" href="/Blog/assets/js/27.c4bd10fc.js"><link rel="prefetch" href="/Blog/assets/js/28.0891a1e9.js"><link rel="prefetch" href="/Blog/assets/js/29.f496e8ee.js"><link rel="prefetch" href="/Blog/assets/js/30.d32c1458.js"><link rel="prefetch" href="/Blog/assets/js/31.b0d186c6.js"><link rel="prefetch" href="/Blog/assets/js/32.c66646e5.js"><link rel="prefetch" href="/Blog/assets/js/33.f71b09e6.js"><link rel="prefetch" href="/Blog/assets/js/34.2db2c84d.js"><link rel="prefetch" href="/Blog/assets/js/35.e781ab17.js"><link rel="prefetch" href="/Blog/assets/js/36.c0e78b1f.js"><link rel="prefetch" href="/Blog/assets/js/37.bfc55683.js"><link rel="prefetch" href="/Blog/assets/js/38.8878da50.js"><link rel="prefetch" href="/Blog/assets/js/39.6a60e03e.js"><link rel="prefetch" href="/Blog/assets/js/4.021d83bb.js"><link rel="prefetch" href="/Blog/assets/js/40.faf281ca.js"><link rel="prefetch" href="/Blog/assets/js/41.0830714e.js"><link rel="prefetch" href="/Blog/assets/js/42.5cb31156.js"><link rel="prefetch" href="/Blog/assets/js/43.555db188.js"><link rel="prefetch" href="/Blog/assets/js/44.ddc8a81f.js"><link rel="prefetch" href="/Blog/assets/js/45.873a99f7.js"><link rel="prefetch" href="/Blog/assets/js/46.414f0c9a.js"><link rel="prefetch" href="/Blog/assets/js/47.37a30162.js"><link rel="prefetch" href="/Blog/assets/js/48.214a8ae3.js"><link rel="prefetch" href="/Blog/assets/js/49.f520e862.js"><link rel="prefetch" href="/Blog/assets/js/5.38576c60.js"><link rel="prefetch" href="/Blog/assets/js/50.b626420b.js"><link rel="prefetch" href="/Blog/assets/js/51.95493655.js"><link rel="prefetch" href="/Blog/assets/js/52.f0eeccef.js"><link rel="prefetch" href="/Blog/assets/js/53.eef0bdde.js"><link rel="prefetch" href="/Blog/assets/js/54.16d696ea.js"><link rel="prefetch" href="/Blog/assets/js/55.e98c4925.js"><link rel="prefetch" href="/Blog/assets/js/56.92d0e2d2.js"><link rel="prefetch" href="/Blog/assets/js/57.94472b99.js"><link rel="prefetch" href="/Blog/assets/js/58.8c847ba9.js"><link rel="prefetch" href="/Blog/assets/js/59.cae2cf75.js"><link rel="prefetch" href="/Blog/assets/js/6.d66bddf3.js"><link rel="prefetch" href="/Blog/assets/js/60.16044e4b.js"><link rel="prefetch" href="/Blog/assets/js/61.d60b9d59.js"><link rel="prefetch" href="/Blog/assets/js/62.6b9c7833.js"><link rel="prefetch" href="/Blog/assets/js/63.6bd78b17.js"><link rel="prefetch" href="/Blog/assets/js/64.64c9299a.js"><link rel="prefetch" href="/Blog/assets/js/65.0ea968f3.js"><link rel="prefetch" href="/Blog/assets/js/66.6ab2e168.js"><link rel="prefetch" href="/Blog/assets/js/67.2dd1359d.js"><link rel="prefetch" href="/Blog/assets/js/68.f7e2d6df.js"><link rel="prefetch" href="/Blog/assets/js/69.57a4c88a.js"><link rel="prefetch" href="/Blog/assets/js/7.01098a8e.js"><link rel="prefetch" href="/Blog/assets/js/70.35bd081e.js"><link rel="prefetch" href="/Blog/assets/js/71.85eedb80.js"><link rel="prefetch" href="/Blog/assets/js/72.51d9fca6.js"><link rel="prefetch" href="/Blog/assets/js/73.338b2fd2.js"><link rel="prefetch" href="/Blog/assets/js/74.f445dc8f.js"><link rel="prefetch" href="/Blog/assets/js/75.643362ca.js"><link rel="prefetch" href="/Blog/assets/js/76.5317d045.js"><link rel="prefetch" href="/Blog/assets/js/77.125d07ea.js"><link rel="prefetch" href="/Blog/assets/js/78.bd65ea9e.js"><link rel="prefetch" href="/Blog/assets/js/79.5a23235e.js"><link rel="prefetch" href="/Blog/assets/js/8.47e36713.js"><link rel="prefetch" href="/Blog/assets/js/80.d3d625e1.js"><link rel="prefetch" href="/Blog/assets/js/82.422ebd06.js"><link rel="prefetch" href="/Blog/assets/js/83.3da4c816.js"><link rel="prefetch" href="/Blog/assets/js/84.9427d460.js"><link rel="prefetch" href="/Blog/assets/js/85.0e9717f3.js"><link rel="prefetch" href="/Blog/assets/js/86.e9359132.js"><link rel="prefetch" href="/Blog/assets/js/87.f036bb29.js"><link rel="prefetch" href="/Blog/assets/js/88.4d613533.js"><link rel="prefetch" href="/Blog/assets/js/89.07212638.js"><link rel="prefetch" href="/Blog/assets/js/9.f35de670.js"><link rel="prefetch" href="/Blog/assets/js/90.4749a7d6.js"><link rel="prefetch" href="/Blog/assets/js/91.727d2564.js"><link rel="prefetch" href="/Blog/assets/js/92.0dc90fc7.js"><link rel="prefetch" href="/Blog/assets/js/93.29ee0241.js"><link rel="prefetch" href="/Blog/assets/js/94.87e41946.js"><link rel="prefetch" href="/Blog/assets/js/95.197ea6a0.js"><link rel="prefetch" href="/Blog/assets/js/96.4e54c3ab.js"><link rel="prefetch" href="/Blog/assets/js/97.ae07eeba.js"><link rel="prefetch" href="/Blog/assets/js/98.771976f7.js"><link rel="prefetch" href="/Blog/assets/js/99.a44111f5.js">
    <link rel="stylesheet" href="/Blog/assets/css/0.styles.6da52ff5.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/Blog/" class="home-link router-link-active"><!----> <span class="site-name">Karajan's Blog</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/Blog/blog/" class="nav-link">Blog</a></div><div class="nav-item"><a href="/Blog/book/" class="nav-link router-link-active">BookStore</a></div><div class="nav-item"><a href="/Blog/mystars/" class="nav-link">MyStars</a></div><div class="nav-item"><a href="/Blog/getsomeonestars/" class="nav-link">SomeoneStars</a></div><div class="nav-item"><a href="https://www.cnblogs.com/karajanking" target="_blank" rel="noopener noreferrer" class="nav-link external">
  博客园
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <a href="https://github.com/HerbertKarajan/Blog" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/Blog/blog/" class="nav-link">Blog</a></div><div class="nav-item"><a href="/Blog/book/" class="nav-link router-link-active">BookStore</a></div><div class="nav-item"><a href="/Blog/mystars/" class="nav-link">MyStars</a></div><div class="nav-item"><a href="/Blog/getsomeonestars/" class="nav-link">SomeoneStars</a></div><div class="nav-item"><a href="https://www.cnblogs.com/karajanking" target="_blank" rel="noopener noreferrer" class="nav-link external">
  博客园
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <a href="https://github.com/HerbertKarajan/Blog" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Git高手之路</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Javascript DOM编程艺术</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Javascript语言精粹</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Webpack实战</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>代码整洁之道</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>图解HTTP</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/Blog/book/图解HTTP/第1章 了解Web及网络基础.html" class="sidebar-link">第1章 了解Web及网络基础</a></li><li><a href="/Blog/book/图解HTTP/第2章 简单的HTTP协议.html" class="sidebar-link">第2章 简单的HTTP协议</a></li><li><a href="/Blog/book/图解HTTP/第3章 HTTP报文内的HTTP信息.html" class="sidebar-link">第3章 HTTP报文内的HTTP信息</a></li><li><a href="/Blog/book/图解HTTP/第4章 返回结果的HTTP状态码.html" class="sidebar-link">第4章 返回结果的HTTP状态码</a></li><li><a href="/Blog/book/图解HTTP/第5章 与HTTP协作的Web服务器.html" class="sidebar-link">第5章 与HTTP协作的Web服务器</a></li><li><a href="/Blog/book/图解HTTP/第6章 HTTP首部.html" class="sidebar-link">第6章 HTTP首部</a></li><li><a href="/Blog/book/图解HTTP/第7章 确保Web安全的HTTPS.html" class="active sidebar-link">第7章 确保Web安全的HTTPS</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Blog/book/图解HTTP/第7章 确保Web安全的HTTPS.html#_1-http的缺点" class="sidebar-link">1. HTTP的缺点</a></li><li class="sidebar-sub-header"><a href="/Blog/book/图解HTTP/第7章 确保Web安全的HTTPS.html#_2-http-加密-认证-完整性保护-https" class="sidebar-link">2. HTTP+加密+认证+完整性保护=HTTPS</a></li></ul></li><li><a href="/Blog/book/图解HTTP/第8章 确认访问用户身份的认证.html" class="sidebar-link">第8章 确认访问用户身份的认证</a></li><li><a href="/Blog/book/图解HTTP/第9章 基于HTTP的功能追加协议.html" class="sidebar-link">第9章 基于HTTP的功能追加协议</a></li><li><a href="/Blog/book/图解HTTP/第10章 构建Web内容的技术.html" class="sidebar-link">第10章 构建Web内容的技术</a></li><li><a href="/Blog/book/图解HTTP/第11章 Web的攻击技术.html" class="sidebar-link">第11章 Web的攻击技术</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>学习Javascript数据结构与算法</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>高性能Javascript</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="第7章-确保web安全的https"><a href="#第7章-确保web安全的https" class="header-anchor">#</a> 第7章 确保Web安全的HTTPS</h1> <p></p><div class="table-of-contents"><ul><li><a href="#_1-http的缺点">1. HTTP的缺点</a><ul><li><a href="#_1-1-通用使用明文可能被窃听">1.1 通用使用明文可能被窃听</a></li><li><a href="#_1-2-不验证通信方的身份就可能遭遇伪装">1.2 不验证通信方的身份就可能遭遇伪装</a></li><li><a href="#_1-3-无法证明报文的完整性，可能已遭篡改">1.3 无法证明报文的完整性，可能已遭篡改</a></li></ul></li><li><a href="#_2-http-加密-认证-完整性保护-https">2. HTTP+加密+认证+完整性保护=HTTPS</a><ul><li><a href="#_2-1-http加上加密处理和认证以及完整性保护后就是https">2.1 HTTP加上加密处理和认证以及完整性保护后就是HTTPS</a></li><li><a href="#_2-2-https是身披ssl外壳的http">2.2 HTTPS是身披SSL外壳的HTTP</a></li><li><a href="#_2-3-相互交换密钥的公开密钥加密技术">2.3 相互交换密钥的公开密钥加密技术</a></li><li><a href="#_2-4-证明公开密钥正确性的证书">2.4 证明公开密钥正确性的证书</a></li><li><a href="#_2-5-https的安全通信机制">2.5 HTTPS的安全通信机制</a></li></ul></li></ul></div><p></p> <p>HTTP协议中有可能存在信息窃听或身份伪装等安全问题。</p> <h2 id="_1-http的缺点"><a href="#_1-http的缺点" class="header-anchor">#</a> 1. HTTP的缺点</h2> <ul><li>通信使用明文，内容可能被窃听</li> <li>不验证通信方的身份，有可能遭遇伪装</li> <li>无法证明报文的完整性，有可能已遭篡改</li></ul> <h3 id="_1-1-通用使用明文可能被窃听"><a href="#_1-1-通用使用明文可能被窃听" class="header-anchor">#</a> 1.1 通用使用明文可能被窃听</h3> <p>HTTP本身不具备加密的功能。</p> <h4 id="tcp-ip是可能被窃听的网络"><a href="#tcp-ip是可能被窃听的网络" class="header-anchor">#</a> TCP/IP是可能被窃听的网络</h4> <p>按TCP/IP协议族的工作机制，通信内容在所有的通信线路上都有可能遭到窥视。即使已加密处理过的通信，也会被窥视到通信内容。只是有可能让人无法破解报文信息的含义。</p> <h4 id="加密处理防止内窃听"><a href="#加密处理防止内窃听" class="header-anchor">#</a> 加密处理防止内窃听</h4> <ul><li>通信的加密<br>
将通信加密。HTTP中没有加密机制，但可以通过和SSL（Secure Socket Layer,安全套接层）或TLS（Transport Layer Security，安全传输层协议）的组合使用，加密HTTP的通信内容。</li></ul> <p>用SSL建立安全通信线路之后，就可以在这条线路上进行HTTP通信了，与SSL组合使用的HTTP被称为HTTPS（超文本传输安全协议）。<br> <img src="/Blog/images/HTTP%E5%9B%BE%E8%A7%A3/7HTTPS.png" alt="HTTPS"></p> <ul><li>内容的加密<br>
将参与通信内容本身加密的方式。由于HTTP协议中没有加密机制，那么就对HTTP协议传输的内容本身加密。这种情况下客户端需要对HTTP报文进行加密处理后再发送请求。</li></ul> <p>为了做到有效的内容加密，前提是要求客户端和服务器同时具备加密和解密机制。需要注意的是，内容仍然有被篡改的风险。</p> <h3 id="_1-2-不验证通信方的身份就可能遭遇伪装"><a href="#_1-2-不验证通信方的身份就可能遭遇伪装" class="header-anchor">#</a> 1.2 不验证通信方的身份就可能遭遇伪装</h3> <p>HTTP协议中的请求和响应不会对通信方进行确认。所以就有服务器是否是发送请求的真正主机，返回的响应是否真的返回到提出请求的客户端问题。</p> <h4 id="任何人都可以发起请求"><a href="#任何人都可以发起请求" class="header-anchor">#</a> 任何人都可以发起请求</h4> <p>HTTP协议通信时，由于不存在确认通信方的处理步骤，任何人都可以发起请求。</p> <p>HTTP协议的实现本身非常简单，不论是谁发送过来的请求都会返回响应，因此不确认通信方，会存在以下隐患：</p> <ul><li>无法确定请求发送至目标的Web服务器是否是按真实意图返回响应的那台服务器。有可能是已伪装的Web服务器。</li> <li>无法确定响应返回到的客户端是否是按真实意图接收响应的那个客户端。有可能是已伪装的客户端。</li> <li>无法确定正在通信的对方是否有访问权限。因为某些Web服务器上保存着重要的信息，只想发给特定用户通信的权限。</li> <li>无法判定请求来自何方。</li> <li>即使是无意义的请求也会全部接收，无法阻止海量请求下DoS攻击（拒绝服务攻击）</li></ul> <h4 id="查明对手的证书"><a href="#查明对手的证书" class="header-anchor">#</a> 查明对手的证书</h4> <p>HTTP不能确定通信方，但使用SSL则可以。<strong>SSL不仅提供加密处理，而且还使用了一种被称为证书的手段，可用于确定通信方。</strong></p> <p>证书是由值得信任的第三方机构颁发，用以证明服务器和客户端是实际存在的。伪造证书异常困难，所以只要能够确认通信方（客户端或服务端）持有的证书，即可判断通信方的真实意图。<br> <img src="/Blog/images/HTTP%E5%9B%BE%E8%A7%A3/7%E8%AF%81%E4%B9%A6.png" alt="证书"><br>
客户端持有证书即可完成个人身份的确认，也可用于对Web网站的认证环节。</p> <h3 id="_1-3-无法证明报文的完整性，可能已遭篡改"><a href="#_1-3-无法证明报文的完整性，可能已遭篡改" class="header-anchor">#</a> 1.3 无法证明报文的完整性，可能已遭篡改</h3> <h4 id="接收到的内容可能有误"><a href="#接收到的内容可能有误" class="header-anchor">#</a> 接收到的内容可能有误</h4> <p>HTTP无法证明通信的报文完整性，因此，在请求或响应送出之后直到对方接收之前的这段时间内，即使请求或响应的内容遭到篡改，也不知道。<br> <img src="/Blog/images/HTTP%E5%9B%BE%E8%A7%A3/7%E7%AF%A1%E6%94%B9.png" alt="篡改">
请求或响应在传输途中，遭攻击者拦截并篡改内容的攻击称为中间人攻击（Man-in-the-Middle attack,MITM）。<br> <img src="/Blog/images/HTTP%E5%9B%BE%E8%A7%A3/7%E4%B8%AD%E9%97%B4%E4%BA%BA%E6%94%BB%E5%87%BB.png" alt="中间人攻击"></p> <h4 id="如何防止篡改"><a href="#如何防止篡改" class="header-anchor">#</a> 如何防止篡改</h4> <p>虽然有使用HTTP确定报文完整性的方法，但事实上并不便捷、可靠。其中常用的是MD5和SHA-1等散列值校验的方法，以及用来确认文件的数字签名方法。</p> <h2 id="_2-http-加密-认证-完整性保护-https"><a href="#_2-http-加密-认证-完整性保护-https" class="header-anchor">#</a> 2. HTTP+加密+认证+完整性保护=HTTPS</h2> <h3 id="_2-1-http加上加密处理和认证以及完整性保护后就是https"><a href="#_2-1-http加上加密处理和认证以及完整性保护后就是https" class="header-anchor">#</a> 2.1 HTTP加上加密处理和认证以及完整性保护后就是HTTPS</h3> <p><img src="/Blog/images/HTTP%E5%9B%BE%E8%A7%A3/7%E4%BD%BF%E7%94%A8HTTPS.png" alt="使用HTTPS"><br>
使用HTTPS通信时，不再用http://,而是https://。</p> <h3 id="_2-2-https是身披ssl外壳的http"><a href="#_2-2-https是身披ssl外壳的http" class="header-anchor">#</a> 2.2 HTTPS是身披SSL外壳的HTTP</h3> <p>HTTPS并非应用层的一种协议。知识HTTP通信接口部分用SSL和TLS协议代替而已。</p> <p>通常，HTTP直接和TCP通信。当使用SSL时，则变为先和SSL通信，再由SSL和TCP通信。<br> <img src="/Blog/images/HTTP%E5%9B%BE%E8%A7%A3/7SSL.png" alt="SSL"><br>
采用SSL后，HTTP就拥有了HTTPS的加密、证书和完整性保护这些功能。</p> <h3 id="_2-3-相互交换密钥的公开密钥加密技术"><a href="#_2-3-相互交换密钥的公开密钥加密技术" class="header-anchor">#</a> 2.3 相互交换密钥的公开密钥加密技术</h3> <p>SSL采用一种叫做<strong>公开密钥加密</strong>的加密处理方式。</p> <p>近代的加密方法中加密算法是公开的，而密钥却是保密的。通过这种方式得以保持加密方法的安全性。</p> <p>加密和解密都会用到密钥。没有密钥就无法对密码解密。如果攻击者获得了密钥，那加密也就失去了意义。</p> <h4 id="共享密钥加密的困境"><a href="#共享密钥加密的困境" class="header-anchor">#</a> 共享密钥加密的困境</h4> <p><strong>加密和解密同用一个密钥的方式称为共享密钥加密，也被叫做对称密钥加密。</strong><br> <img src="/Blog/images/HTTP%E5%9B%BE%E8%A7%A3/7%E5%AF%B9%E7%A7%B0%E5%AF%86%E9%92%A5%E5%8A%A0%E5%AF%86.png" alt="对称密钥加密"><br>
以共享密钥方式加密时必须将密钥也发给对方。在互联网上转发密钥时，如果通信被监听那么密钥就可会落入攻击者手中，也就失去了加密的意义。另外还得设法安全的保管接收到的密钥。<br> <img src="/Blog/images/HTTP%E5%9B%BE%E8%A7%A3/7%E5%AF%B9%E7%A7%B0%E5%AF%86%E9%92%A5%E5%8A%A0%E5%AF%86%E9%97%AE%E9%A2%98.png" alt="对称密钥加密问题"></p> <h4 id="使用两把密钥的公开密钥加密"><a href="#使用两把密钥的公开密钥加密" class="header-anchor">#</a> 使用两把密钥的公开密钥加密</h4> <p>公开密钥加密方式很好的解决了共享密钥加密的困难。</p> <p>公开密钥加密使用一对非对称的密钥。一把叫做私有密钥，另一把叫做公开密钥。私有密钥不能让其他任何人知道，而公开密钥则可以随意发布，任何人都可以获得。</p> <p><strong>使用公开密钥加密方式，发送密文的一方使用对方的公开密钥进行加密处理，对方接收到被加密的信息后，再使用自己的私有密钥进行解密</strong>。利用这种方法，不需要发送用来解密的私有密钥，也不必担心密钥被攻击者窃听而盗走。</p> <p>你可能会出现疑问？既然可以获取到公开密钥和密文，为什么不反向通过破解公开密钥解密密文。要想根据密文和公开密钥，恢复到信息原文是异常困难的，<strong>因为解密过程就是在对离散对数进行求值，这并非轻而易举就能办到</strong>。目前的技术来看进行破解是不现实的。<br> <img src="/Blog/images/HTTP%E5%9B%BE%E8%A7%A3/7%E9%9D%9E%E5%AF%B9%E7%A7%B0%E5%AF%86%E9%92%A5%E5%8A%A0%E5%AF%86.png" alt="非对称密钥加密"></p> <h4 id="https采用混合加密机制"><a href="#https采用混合加密机制" class="header-anchor">#</a> HTTPS采用混合加密机制</h4> <p><strong>HTTPS采用共享密钥加密和公开密钥加密两者并用的混合加密机制。<strong>若密钥能够实现安全交换，那有可能会考虑仅使用公开密钥加密来通信。但是</strong>公开密钥加密与共享密钥加密相比，其处理速度要慢。</strong></p> <p>所以应充分利用两者各自的优势，将多种方法组合起来用于通信。<strong>在交换密钥环节使用公开密钥加密方式，之后的报文通信交换报文阶段则使用共享密钥加密方式。</strong><br> <img src="/Blog/images/HTTP%E5%9B%BE%E8%A7%A3/7%E6%B7%B7%E5%90%88%E5%8A%A0%E5%AF%86%E6%9C%BA%E5%88%B6.png" alt="混合加密机制"></p> <h3 id="_2-4-证明公开密钥正确性的证书"><a href="#_2-4-证明公开密钥正确性的证书" class="header-anchor">#</a> 2.4 证明公开密钥正确性的证书</h3> <p>如何证明公开密钥本身就是货真价实的公开密钥？公开密钥有可能在传输途中，已经被攻击者替换掉了。</p> <p>为了解决这个问题，可以使用由数字证书认证机构（CA，Certificate Authority）和其相关颁发的公开密钥证书。数字证书认证机构处于客户端与服务器双方都可信赖的第三方机构的立场上。</p> <p>流程是服务器的运营人员向数字证书认证机构提出公开密钥的申请。数字证书认证机构在判明提出申请者的身份后，会对已申请的公开密钥做数字签名，然后分配这个已签名的公开密钥，并将该公开密钥放入公钥证书后绑定在一起。服务器会将这份由数字证书认证机构颁发的公钥证书发送给客户端，以进行公开密钥加密方式通信。<strong>公钥证书也叫做数字证书或证书</strong>。</p> <p>接到证书的客户端可使用数字证书认证机构的公开密钥，对那张证书上的数字签名进行验证，<strong>验证通过，客户端可明确两件事：1.认证服务器的公开密钥的是真实有效的数字证书认证机构。2.服务器的公开密钥是值得信赖的</strong>。</p> <p>认证机关的公开密钥必须安全的转交给客户端。如何转交是一件很困难的事，因此，多数浏览器开发商发布版本时，会事先在内部植入常用认证机关的公开密钥。<br> <img src="/Blog/images/HTTP%E5%9B%BE%E8%A7%A3/7%E6%95%B0%E5%AD%97%E8%AF%81%E4%B9%A6.png" alt="数字证书"></p> <h4 id="可证明组织真实性的ev-ssl证书"><a href="#可证明组织真实性的ev-ssl证书" class="header-anchor">#</a> 可证明组织真实性的EV SSL证书</h4> <p>可确认对方服务器背后运营的企业是否真实存在。</p> <h4 id="用以确认客户端的客户端证书"><a href="#用以确认客户端的客户端证书" class="header-anchor">#</a> 用以确认客户端的客户端证书</h4> <p>客户端证书进行客户端认证，证明服务器正在通信的对方始终是预料之内的客户端，作用和服务器证书是一样的。</p> <p>想获取客户端证书，用户得自行安装客户端证书。但需要支付一定的费用。现状是，安全性极高的认证机构可颁发客户端证书但仅用于特殊用途的业务。比如可支撑客户端证书支出费用的业务。比如银行的网上银行就采用了客户端证书。</p> <h4 id="由自认证机构颁发的证书称为自签名证书"><a href="#由自认证机构颁发的证书称为自签名证书" class="header-anchor">#</a> 由自认证机构颁发的证书称为自签名证书</h4> <p>自签名证书在互联网上不可作为证书使用。自认证机构能够产生的作用就是自己对外宣称我是XXX。</p> <h3 id="_2-5-https的安全通信机制"><a href="#_2-5-https的安全通信机制" class="header-anchor">#</a> 2.5 HTTPS的安全通信机制</h3> <p><img src="/Blog/images/HTTP%E5%9B%BE%E8%A7%A3/7HTTPS%E7%9A%84%E9%80%9A%E4%BF%A1.png" alt="HTTPS的通信"></p> <h4 id="ssl和tls"><a href="#ssl和tls" class="header-anchor">#</a> SSL和TLS</h4> <p>HTTPS使用SSL（Secure Soket Layer,安全套接层）和TLS（Transport Layer Security,安全传输层协议）两个协议。以SSL3.0为基准制定了TLS1.0、TLS1.1、TLS1.2。TLS是以SSL为原型开发的协议，有时会统称该协议为SSL。当前主流版本是SSL3.0和TLS1.0。</p> <h4 id="ssl速度慢吗"><a href="#ssl速度慢吗" class="header-anchor">#</a> SSL速度慢吗</h4> <p>HTTPS也存在一些问题，使用SSL时，它的处理速度会变慢。
<img src="/Blog/images/HTTP%E5%9B%BE%E8%A7%A3/7SSL%E9%80%9F%E5%BA%A6.png" alt="SSL速度"></p> <p>SSL的慢分为两种：一是通信慢。二是由于大量消耗CPU及内存资源，导致处理速度变慢。</p> <p>针对速度变慢的问题，并没有根本性的解决方案，我们会使用SSL加速器这种（专用服务器）硬件来改善该问题。用来分担负载。</p> <h4 id="为什么不一直使用https"><a href="#为什么不一直使用https" class="header-anchor">#</a> 为什么不一直使用HTTPS?</h4> <p>因为加密通信会消耗更多的CPU及内存资源。如果每次通信都加密，会消耗相当多的资源。因此，如果是非敏感信息则使用HTTP通信，只有在包含个人信息等敏感数据时，才利于HTTPS加密通信。想要节约购买证书的开销也是原因之一，因为证书一年的授权价格大约需要600人民币。</p></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/HerbertKarajan/Blog/edit/main/docs/book/图解HTTP/第7章 确保Web安全的HTTPS.md" target="_blank" rel="noopener noreferrer">Edit this page</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">4/23/2021, 8:59:23 AM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/Blog/book/图解HTTP/第6章 HTTP首部.html" class="prev">第6章 HTTP首部</a></span> <span class="next"><a href="/Blog/book/图解HTTP/第8章 确认访问用户身份的认证.html">第8章 确认访问用户身份的认证</a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/Blog/assets/js/app.948c224d.js" defer></script><script src="/Blog/assets/js/3.079b83dd.js" defer></script><script src="/Blog/assets/js/81.80416cc9.js" defer></script>
  </body>
</html>
