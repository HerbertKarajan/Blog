(window.webpackJsonp=window.webpackJsonp||[]).push([[83],{472:function(t,s,a){"use strict";a.r(s);var n=a(1),e=Object(n.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"第9章-基于http的功能追加协议"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#第9章-基于http的功能追加协议"}},[t._v("#")]),t._v(" 第9章 基于HTTP的功能追加协议")]),t._v(" "),a("p"),a("div",{staticClass:"table-of-contents"},[a("ul",[a("li",[a("a",{attrs:{href:"#_1-基于http的协议"}},[t._v("1. 基于HTTP的协议")])]),a("li",[a("a",{attrs:{href:"#_2-消除http瓶颈的spdy"}},[t._v("2. 消除HTTP瓶颈的SPDY")]),a("ul",[a("li",[a("a",{attrs:{href:"#_2-1-http的瓶颈"}},[t._v("2.1 HTTP的瓶颈")])]),a("li",[a("a",{attrs:{href:"#_2-2-spdy的设计与功能"}},[t._v("2.2 SPDY的设计与功能")])]),a("li",[a("a",{attrs:{href:"#_2-3-spdy消除web瓶颈了吗？"}},[t._v("2.3 SPDY消除Web瓶颈了吗？")])])])]),a("li",[a("a",{attrs:{href:"#_3-使用浏览器进行全双工通信的websocket"}},[t._v("3. 使用浏览器进行全双工通信的WebSocket")]),a("ul",[a("li",[a("a",{attrs:{href:"#_3-1-websocket的设计与功能"}},[t._v("3.1 WebSocket的设计与功能")])]),a("li",[a("a",{attrs:{href:"#_3-2-websocket协议"}},[t._v("3.2 WebSocket协议")])])])]),a("li",[a("a",{attrs:{href:"#_4-期盼已久的http-2-0"}},[t._v("4. 期盼已久的HTTP/2.0")])]),a("li",[a("a",{attrs:{href:"#_5-web服务器管理文件的webdav"}},[t._v("5. Web服务器管理文件的WebDAV")])])])]),a("p"),t._v(" "),a("h2",{attrs:{id:"_1-基于http的协议"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-基于http的协议"}},[t._v("#")]),t._v(" 1. 基于HTTP的协议")]),t._v(" "),a("p",[t._v("早期制定者主要想将HTTP当作传输HTML文档的协议。但现在有其他的功能比如在线购物、网络服务等等。虽然功能满足需求，但性能上不是最优。所以有了一些新协议的规则基于HTTP，并在此基础上添加了新的功能。")]),t._v(" "),a("h2",{attrs:{id:"_2-消除http瓶颈的spdy"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-消除http瓶颈的spdy"}},[t._v("#")]),t._v(" 2. 消除HTTP瓶颈的SPDY")]),t._v(" "),a("p",[t._v("SPDY目的是解决HTTP的性能瓶颈，缩短Web页面的加载时间。")]),t._v(" "),a("h3",{attrs:{id:"_2-1-http的瓶颈"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-http的瓶颈"}},[t._v("#")]),t._v(" 2.1 HTTP的瓶颈")]),t._v(" "),a("p",[a("img",{attrs:{src:"/Blog/images/HTTP%E5%9B%BE%E8%A7%A3/9%E4%BB%A5%E5%89%8DHTTP%E9%80%9A%E4%BF%A1.png",alt:"以前HTTP通信"}})]),t._v(" "),a("ul",[a("li",[a("p",[t._v("Ajax的解决方法"),a("br"),t._v(" "),a("img",{attrs:{src:"/Blog/images/HTTP%E5%9B%BE%E8%A7%A3/9Ajax%E9%80%9A%E4%BF%A1.png",alt:"Ajax通信"}}),a("br"),t._v("\n利用Ajax实时的从服务器获取内容，有可能会导致大量请求产生。")])]),t._v(" "),a("li",[a("p",[t._v("Comet的解决方法"),a("br"),t._v("\n一旦服务器端有内容更新了，Comet不会让请求等待，而是直接给客户端返回响应。这是一种通过延迟应答，模拟实现服务器端向客户端推送的功能。")])])]),t._v(" "),a("p",[t._v("通常，服务器端接收到请求，在处理完毕后就会立即返回响应，但为了实现推送功能，Comet会先将响应置于挂起状态，当服务器端有内容更新时，再返回该响应。")]),t._v(" "),a("p",[t._v("内容上虽然做到了实时更新，但为了保留响应，一次连接的持续时间也变长了，为了维持连接会消耗更多的资源。\n"),a("img",{attrs:{src:"/Blog/images/HTTP%E5%9B%BE%E8%A7%A3/9Comet%E9%80%9A%E4%BF%A1.png",alt:"Comet通信"}})]),t._v(" "),a("h3",{attrs:{id:"_2-2-spdy的设计与功能"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-spdy的设计与功能"}},[t._v("#")]),t._v(" 2.2 SPDY的设计与功能")]),t._v(" "),a("p",[t._v("SPDY没有完全改写HTTP协议，而是在TCP/IP的应用层与传输层间通过新加会话层的形式运作。考虑到安全性问题，SPDY规定通信中使用SSL。"),a("br"),t._v(" "),a("img",{attrs:{src:"/Blog/images/HTTP%E5%9B%BE%E8%A7%A3/9SPDY%E7%9A%84%E8%AE%BE%E8%AE%A1.png",alt:"SPDY的设计"}}),a("br"),t._v("\n使用SPDY后，HTTP协议额外获得以下功能：")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("多路复用流"),a("br"),t._v("\n通过单一的TCP连接，可以无限制处理多个HTTP请求。因此TCP的处理效率得到提高。")])]),t._v(" "),a("li",[a("p",[t._v("赋予请求优先级"),a("br"),t._v("\n可以给请求逐个分配优先级顺序。可以解决发送多个请求时，因带宽低而导致响应变慢的问题。")])]),t._v(" "),a("li",[a("p",[t._v("压缩HTTP首部"),a("br"),t._v("\n压缩HTTP请求和响应的首部")])]),t._v(" "),a("li",[a("p",[t._v("推送功能"),a("br"),t._v("\n支持服务器主动向客户端推送数据的功能。服务器可直接发送数据，而不必等待客户端请求。")])]),t._v(" "),a("li",[a("p",[t._v("服务器提示功能"),a("br"),t._v("\n服务器可以主动提示客户端请求所需的资源。由于在客户端发现资源之前就可以获知资源的存在，因此在资源已缓存等情况下，可以避免发送不必要的请求。")])])]),t._v(" "),a("h3",{attrs:{id:"_2-3-spdy消除web瓶颈了吗？"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-3-spdy消除web瓶颈了吗？"}},[t._v("#")]),t._v(" 2.3 SPDY消除Web瓶颈了吗？")]),t._v(" "),a("p",[t._v("因为SPDY基本上只是将单个域名（IP地址）的通信多路复用，所以当一个Web网站上使用多个域名下的资源，改善效果就会受到限制。")]),t._v(" "),a("h2",{attrs:{id:"_3-使用浏览器进行全双工通信的websocket"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-使用浏览器进行全双工通信的websocket"}},[t._v("#")]),t._v(" 3. 使用浏览器进行全双工通信的WebSocket")]),t._v(" "),a("p",[t._v("通信若使用HTTP协议，就无法彻底解决瓶颈问题。WebSocket网络技术正是为解决这些问题而实现的一套新协议及API。")]),t._v(" "),a("h3",{attrs:{id:"_3-1-websocket的设计与功能"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-1-websocket的设计与功能"}},[t._v("#")]),t._v(" 3.1 WebSocket的设计与功能")]),t._v(" "),a("p",[t._v("WebSocket，即Web浏览器与Web服务器之间双全工通信标准。仍在开发的WebSocket技术主要为了解决Ajax和Comet里XMLHTTPRequest附带的缺陷所引起的问题。")]),t._v(" "),a("h3",{attrs:{id:"_3-2-websocket协议"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-2-websocket协议"}},[t._v("#")]),t._v(" 3.2 WebSocket协议")]),t._v(" "),a("p",[t._v("由于是建立在HTTP基础上的协议，因此连接的发起方仍是客户端，而一旦建立WebSocket通信连接，不论服务器还是客户端，任意一方都可直接向对方发送报文。")]),t._v(" "),a("p",[t._v("WebSocket协议的主要特点：")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("推送功能"),a("br"),t._v("\n支持有服务器向客户端推送数据的推送功能。这样服务器就可直接发送数据，而不必等待客户端的请求。")])]),t._v(" "),a("li",[a("p",[t._v("减少通信量"),a("br"),t._v("\n只要建立起WebSocket连接，就希望一直保持连接状态。和HTTP相比，每次连接时的开销减少，而且由于WebSocket的首部信息很小，通信量也就相应的减少了。")])])]),t._v(" "),a("h4",{attrs:{id:"握手请求"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#握手请求"}},[t._v("#")]),t._v(" 握手请求")]),t._v(" "),a("p",[t._v("在HTTP连接建立后，需要完成一次“握手”的步骤。")]),t._v(" "),a("p",[t._v("为了实现WebSocket通信，需要用到HTTP的Upgrade首部字段，告知服务器通信协议发生改变，以达到握手的目的。\n"),a("img",{attrs:{src:"/Blog/images/HTTP%E5%9B%BE%E8%A7%A3/9websocket.png",alt:"websocket"}})]),t._v(" "),a("h4",{attrs:{id:"握手响应"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#握手响应"}},[t._v("#")]),t._v(" 握手响应")]),t._v(" "),a("p",[t._v("对于之前的请求，返回状态码101 Switching Protocols的响应。")]),t._v(" "),a("p",[t._v("成功握手确立WebSocket连接后，通信时不再使用HTTP的数据帧，而采用WebSocket独立的数据帧。"),a("br"),t._v(" "),a("img",{attrs:{src:"/Blog/images/HTTP%E5%9B%BE%E8%A7%A3/9WebSocket%E9%80%9A%E4%BF%A1.png",alt:"WebSocket通信"}})]),t._v(" "),a("h4",{attrs:{id:"websocket-api"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#websocket-api"}},[t._v("#")]),t._v(" WebSocket API")]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" socket"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("WebSocket")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'ws://game.example.com:12345/updates'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nsocket"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("onopen")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setInterval")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("socket"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("bufferedAmount"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      socket"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("send")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getUpdateData")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("50")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br")])]),a("ul",[a("li",[a("p",[t._v("webSocket.readyState"),a("br"),t._v("\nreadyState属性返回实例对象的当前状态，共有四种。"),a("br"),t._v("\nCONNECTING：值为0，表示正在连接。"),a("br"),t._v("\nOPEN：值为1，表示连接成功，可以通信了。"),a("br"),t._v("\nCLOSING：值为2，表示连接正在关闭。"),a("br"),t._v("\nCLOSED：值为3，表示连接已经关闭，或者打开连接失败。")])]),t._v(" "),a("li",[a("p",[t._v("webSocket.onopen"),a("br"),t._v("\n实例对象的onopen属性，用于指定连接成功后的回调函数。")])])]),t._v(" "),a("p",[t._v("如果要指定多个回调函数，可以使用addEventListener方法。")]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("ws"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("addEventListener")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'open'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("event")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  ws"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("send")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Hello Server!'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br")])]),a("ul",[a("li",[t._v("webSocket.onclose"),a("br"),t._v("\n实例对象的onclose属性，用于指定连接关闭后的回调函数。")])]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("ws"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("onclose")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("event")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" code "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" event"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("code"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" reason "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" event"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("reason"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" wasClean "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" event"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("wasClean"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// handle close event")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br")])]),a("ul",[a("li",[t._v("webSocket.onmessage"),a("br"),t._v("\n实例对象的onmessage属性，用于指定收到服务器数据后的回调函数。")])]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("ws"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("onmessage")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("event")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" data "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" event"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("data"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 处理数据")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\nws"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("addEventListener")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"message"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("event")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" data "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" event"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("data"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 处理数据")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br")])]),a("ul",[a("li",[t._v("webSocket.send()"),a("br"),t._v("\n实例对象的send()方法用于向服务器发送数据。")])]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("ws"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("send")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'your message'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("ul",[a("li",[t._v("webSocket.bufferedAmount"),a("br"),t._v("\n实例对象的bufferedAmount属性，表示还有多少字节的二进制数据没有发送出去。它可以用来判断发送是否结束。")])]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" data "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ArrayBuffer")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("10000000")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nsocket"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("send")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("data"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("socket"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("bufferedAmount "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("===")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 发送完毕")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 发送还没结束")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br")])]),a("ul",[a("li",[t._v("webSocket.onerror"),a("br"),t._v("\n实例对象的onerror属性，用于指定报错时的回调函数。")])]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("socket"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("onerror")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("event")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// handle error event")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\nsocket"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("addEventListener")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"error"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("event")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// handle error event")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br")])]),a("p",[t._v("WebSocket 服务器的实现可以使用Socket.IO。")]),t._v(" "),a("h2",{attrs:{id:"_4-期盼已久的http-2-0"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-期盼已久的http-2-0"}},[t._v("#")]),t._v(" 4. 期盼已久的HTTP/2.0")]),t._v(" "),a("p",[t._v("HTTP/2.0的目标是改善用户在使用Web时的速度体验。")]),t._v(" "),a("p",[a("img",{attrs:{src:"/Blog/images/HTTP%E5%9B%BE%E8%A7%A3/9HTTP2.png",alt:"HTTP2"}})]),t._v(" "),a("h2",{attrs:{id:"_5-web服务器管理文件的webdav"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5-web服务器管理文件的webdav"}},[t._v("#")]),t._v(" 5. Web服务器管理文件的WebDAV")]),t._v(" "),a("p",[t._v("WebDAV（Web-based Distributed Authoring and Versioning,基于万维网的分布式创作和版本控制）是一个可对Web服务器上的内容直接进行文件复制、编辑等操作的分布式文件系统。")]),t._v(" "),a("p",[a("img",{attrs:{src:"/Blog/images/HTTP%E5%9B%BE%E8%A7%A3/9WebDAV.png",alt:"WebDAV"}})])])}),[],!1,null,null,null);s.default=e.exports}}]);